{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kunal Files\\\\projects\\\\janta_voice_final\\\\frontend\\\\src\\\\pages\\\\VoiceComplaint.jsx\",\n  _s = $RefreshSig$();\n// // import React, { useState } from \"react\";\n// // import axios from \"axios\";\n\n// // export default function VoiceComplaint() {\n// //   const [logs, setLogs] = useState([]);\n// //   const [loading, setLoading] = useState(false);\n// //   const [complaintId, setComplaintId] = useState(null);\n// //   const [submitted, setSubmitted] = useState(false);\n\n// //   const appendLog = (line) => {\n// //     setLogs((prev) => [...prev, line]);\n// //   };\n\n// //   const handleVoiceComplaint = async () => {\n// //     setLoading(true);\n// //     setLogs([\"üéôÔ∏è Voice complaint started...\"]);\n// //     setSubmitted(false);\n// //     setComplaintId(null);\n\n// //     try {\n// //       // 1. Trigger the Python voice bot and get structured data\n// //       const voiceRes = await axios.get(\"http://localhost:5000/api/\");\n// //       if (voiceRes.data.status !== \"success\") {\n// //         appendLog(\"‚ùå Voice bot error: \" + voiceRes.data.message);\n// //         return;\n// //       }\n\n// //       const complaintData = voiceRes.data.data;\n// //       appendLog(\"‚úÖ Voice bot finished. Data:\");\n// //       appendLog(JSON.stringify(complaintData, null, 2));\n\n// //       // 2. Send that same data to the complaints endpoint\n// //       const formRes = await axios.post(\n// //         \"http://localhost:5000/api/complaint\",\n// //         {\n// //           name: complaintData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] || complaintData.name,\n// //           complaint: complaintData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] || complaintData.complaint,\n// //           location: complaintData[\"‡§∏‡•ç‡§•‡§æ‡§®\"] || complaintData.location,\n// //           // map any other fields if needed\n// //         }\n// //       );\n\n// //       // 3. Capture and display the Complaint ID\n// //       const newId = formRes.data.complaintId || formRes.data.complaintId;\n// //       setComplaintId(newId);\n// //       setSubmitted(true);\n// //       appendLog(`üì¨ Complaint submitted. ID: ${newId}`);\n// //     } catch (err) {\n// //       appendLog(\"‚ùå Error: \" + err.message);\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   return (\n// //     <div className=\"max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow\">\n// //       <h2 className=\"text-2xl font-semibold mb-4\">Voice Complaint</h2>\n// //       <button\n// //         onClick={handleVoiceComplaint}\n// //         disabled={loading}\n// //         className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50\"\n// //       >\n// //         {loading ? \"Processing...\" : \"Start Voice Complaint\"}\n// //       </button>\n\n// //       <div className=\"mt-6 bg-gray-900 text-green-200 p-4 rounded font-mono h-48 overflow-y-scroll\">\n// //         {logs.map((line, i) => (\n// //           <div key={i}>{line}</div>\n// //         ))}\n// //       </div>\n\n// //       {submitted && (\n// //         <div className=\"mt-6 text-green-700 font-semibold\">\n// //           Complaint submitted successfully!<br />\n// //           Your Complaint ID: <span className=\"font-bold\">{complaintId}</span>\n// //         </div>\n// //       )}\n// //     </div>\n// //   );\n// // }\n\n// import React, { useState } from \"react\";\n// import axios from \"axios\";\n\n// export default function VoiceComplaint() {\n//   // 1. State mirrors ComplaintForm\n//   const [formData, setFormData] = useState({\n//     name: \"\",\n//     complaint: \"\",\n//     location: \"\",\n//     urgency: \"normal\",\n//   });\n\n//   const [complaintId, setComplaintId] = useState(null);\n//   const [submitted, setSubmitted] = useState(false);\n//   const [logs, setLogs] = useState([]);\n//   const [loading, setLoading] = useState(false);\n\n//   // helper to append to console‚Äëstyle logs\n//   const appendLog = (line) => setLogs((prev) => [...prev, line]);\n\n//   const handleVoiceComplaint = async () => {\n//     setLoading(true);\n//     setLogs([\"üéôÔ∏è Starting voice complaint...\"]);\n//     setSubmitted(false);\n//     setComplaintId(null);\n\n//     try {\n//       // 2. Trigger your backend voice route\n//       const voiceRes = await axios.get(\"http://localhost:5000/api/voice-complaint\");\n//       if (voiceRes.data.status !== \"success\") {\n//         appendLog(\"Thank You!\");\n//         return;\n//       }\n\n//       // 3. Pull out structured data\n//       const data = voiceRes.data.data;\n//       appendLog(\"‚úÖ Voice data received:\");\n//       appendLog(JSON.stringify(data, null, 2));\n\n//       // // 4. Map it into the exact same formData shape\n//       // const mapped = {\n//       //   name: data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] || \"\",\n//       //   location: data[\"‡§∏‡•ç‡§•‡§æ‡§®\"] || \"\",\n//       //   department: data[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"] || \"\",\n//       //   description: data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] || \"\",\n//       //   urgency: \"normal\",\n//       // };\n\n//       const aiData = voiceRes.data.data;\n\n//       const payload = {\n//         name: aiData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] || \"\",\n//         location: aiData[\"‡§∏‡•ç‡§•‡§æ‡§®\"] || \"\",\n//         department: aiData[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"] || \"\",\n//         description: aiData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] || \"\",\n//       };\n\n//       await axios.post(\"http://localhost:5000/api/complaint\", payload);\n\n//       setFormData(mapped);\n\n//       // 5. POST to the same endpoint as ComplaintForm\n//       const res = await axios.post(\"http://localhost:5000/api/complaint\", mapped);\n//       setComplaintId(res.data.complaintId);\n//       setSubmitted(true);\n//       appendLog(`üì¨ Complaint submitted. ID: ${res.data.complaintId}`);\n//     } catch (err) {\n//       appendLog(\"‚ùå Submission error: \" + err.message);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   return (\n//     <div className=\"max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow\">\n//       <h2 className=\"text-2xl font-semibold mb-4\">Voice Complaint</h2>\n\n//       {/* Start button */}\n//       <button\n//         onClick={handleVoiceComplaint}\n//         disabled={loading}\n//         className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50\"\n//       >\n//         {loading ? \"Processing...\" : \"Start Voice Complaint\"}\n//       </button>\n\n//       {/* Console logs */}\n//       <div className=\"mt-4 bg-gray-900 text-green-200 p-4 rounded font-mono h-48 overflow-y-scroll\">\n//         {logs.length === 0 ? <div>Logs will appear here...</div> : logs.map((l, i) => <div key={i}>{l}</div>)}\n//       </div>\n\n//       {/* Confirmation */}\n//       {submitted && (\n//         <div className=\"mt-6 text-green-700 font-semibold\">\n//           Complaint submitted successfully!<br />\n//           Your Complaint ID: <span className=\"font-bold\">{complaintId}</span>\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { Phone, PhoneOff, Mic, MicOff, Volume2, VolumeX, User, Bot, CheckCircle, AlertCircle, Clock, Signal, PhoneCall } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function VoiceComplaint() {\n  _s();\n  const [conversation, setConversation] = useState([]);\n  const [isListening, setIsListening] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [callActive, setCallActive] = useState(false);\n  const [callConnecting, setCallConnecting] = useState(false);\n  const [complaintId, setComplaintId] = useState(null);\n  const [callStatus, setCallStatus] = useState('idle'); // idle, connecting, active, completed, error\n  const [audioEnabled, setAudioEnabled] = useState(true);\n  const [currentStep, setCurrentStep] = useState('');\n  const [sessionId, setSessionId] = useState(null);\n  const [connectionError, setConnectionError] = useState(null);\n  const [callDuration, setCallDuration] = useState(0);\n  const conversationRef = useRef(null);\n  const eventSourceRef = useRef(null);\n  const callStartTimeRef = useRef(null);\n  const callTimerRef = useRef(null);\n  const reconnectTimeoutRef = useRef(null);\n  const maxReconnectAttempts = 3;\n  const reconnectAttempts = useRef(0);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (conversationRef.current) {\n      conversationRef.current.scrollTop = conversationRef.current.scrollHeight;\n    }\n  }, [conversation]);\n\n  // Call duration timer\n  useEffect(() => {\n    if (callActive && callStartTimeRef.current) {\n      callTimerRef.current = setInterval(() => {\n        const elapsed = Math.floor((Date.now() - callStartTimeRef.current) / 1000);\n        setCallDuration(elapsed);\n      }, 1000);\n    } else {\n      if (callTimerRef.current) {\n        clearInterval(callTimerRef.current);\n        callTimerRef.current = null;\n      }\n    }\n    return () => {\n      if (callTimerRef.current) {\n        clearInterval(callTimerRef.current);\n      }\n    };\n  }, [callActive]);\n\n  // Cleanup on component unmount\n  useEffect(() => {\n    return () => {\n      endCall();\n      if (reconnectTimeoutRef.current) {\n        clearTimeout(reconnectTimeoutRef.current);\n      }\n    };\n  }, []);\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n  const addMessage = useCallback((sender, message, type = 'text', metadata = {}) => {\n    const newMessage = {\n      id: Date.now() + Math.random(),\n      sender,\n      // 'bot' or 'user'\n      message,\n      type,\n      // 'text', 'status', 'json', 'error', 'system'\n      timestamp: new Date(),\n      metadata\n    };\n    setConversation(prev => [...prev, newMessage]);\n  }, []);\n  const startCall = async () => {\n    try {\n      setCallConnecting(true);\n      setCallStatus('connecting');\n      setConversation([]);\n      setConnectionError(null);\n      reconnectAttempts.current = 0;\n      addMessage('system', '‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...', 'status');\n\n      // Start voice session\n      const response = await fetch('http://localhost:5000/api/start-voice-session', {\n        method: 'POST',\n        credentials: 'include',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (!data.success) {\n        throw new Error(data.error || 'Failed to start session');\n      }\n      setSessionId(data.session_id);\n\n      // Wait a moment for session to initialize\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Start SSE connection\n      await setupSSEConnection();\n    } catch (error) {\n      console.error('Error starting call:', error);\n      setConnectionError(error.message);\n      addMessage('system', `‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ: ${error.message}`, 'error');\n      setCallConnecting(false);\n      setCallStatus('error');\n    }\n  };\n  const setupSSEConnection = async () => {\n    try {\n      // Close existing connection\n      if (eventSourceRef.current) {\n        eventSourceRef.current.close();\n      }\n      eventSourceRef.current = new EventSource('http://localhost:5000/api/voice-complaint-stream', {\n        withCredentials: true\n      });\n      eventSourceRef.current.onopen = () => {\n        console.log('SSE connection opened');\n        setCallConnecting(false);\n        setCallActive(true);\n        setCallStatus('active');\n        callStartTimeRef.current = Date.now();\n        setCallDuration(0);\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§ó‡§à ‡§π‡•à', 'status');\n        reconnectAttempts.current = 0;\n      };\n      eventSourceRef.current.onmessage = event => {\n        try {\n          const data = JSON.parse(event.data);\n          handleRealtimeUpdate(data);\n        } catch (error) {\n          console.error('Error parsing SSE data:', error);\n        }\n      };\n      eventSourceRef.current.onerror = error => {\n        console.error('SSE Error:', error);\n        if (reconnectAttempts.current < maxReconnectAttempts) {\n          addMessage('system', '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ, ‡§™‡•Å‡§®‡§É ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...', 'status');\n          reconnectAttempts.current += 1;\n          reconnectTimeoutRef.current = setTimeout(() => {\n            if (callActive) {\n              setupSSEConnection();\n            }\n          }, 2000 * reconnectAttempts.current); // Exponential backoff\n        } else {\n          addMessage('system', '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç‡•§', 'error');\n          endCall();\n        }\n      };\n    } catch (error) {\n      console.error('Error setting up SSE:', error);\n      setConnectionError(error.message);\n      endCall();\n    }\n  };\n  const handleRealtimeUpdate = useCallback(data => {\n    if (!data || !data.type) return;\n    console.log('Received update:', data.type, data);\n    switch (data.type) {\n      case 'connected':\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•Å‡§à', 'status');\n        break;\n      case 'bot_question':\n      case 'bot_speaking':\n        setIsSpeaking(true);\n        setCurrentStep(data.step || '‡§¨‡•ã‡§ü ‡§¨‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à');\n        addMessage('bot', data.message, 'text', {\n          step: data.step\n        });\n        // Simulate speaking duration based on message length\n        const speakingDuration = Math.max(2000, data.message.length * 100);\n        setTimeout(() => setIsSpeaking(false), speakingDuration);\n        break;\n      case 'listening_start':\n        setIsListening(true);\n        setIsSpeaking(false);\n        setIsProcessing(false);\n        setCurrentStep('‡§Ü‡§™‡§ï‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•Å‡§® ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');\n        addMessage('system', '‡§Ö‡§¨ ‡§¨‡•ã‡§≤‡•á‡§Ç...', 'status');\n        break;\n      case 'listening_end':\n        setIsListening(false);\n        setCurrentStep('‡§Ü‡§™‡§ï‡•Ä ‡§¨‡§æ‡§§ ‡§∏‡§Æ‡§ù ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');\n        break;\n      case 'user_response':\n        setIsProcessing(false);\n        addMessage('user', data.message, 'text');\n        setCurrentStep('');\n        break;\n      case 'processing':\n        setIsProcessing(true);\n        setCurrentStep(data.message || '‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó...');\n        break;\n      case 'complaint_structured':\n        setCallStatus('processing');\n        addMessage('bot', '‡§Ü‡§™‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•ã ‡§ó‡§Ø‡§æ:', 'status');\n        if (data.data) {\n          addMessage('bot', JSON.stringify(data.data, null, 2), 'json', {\n            complaintData: data.data\n          });\n        }\n        break;\n      case 'complaint_submitted':\n        setCallStatus('completed');\n        setComplaintId(data.complaintId);\n        addMessage('bot', `‡§Ü‡§™‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§¶‡§∞‡•ç‡§ú ‡§π‡•ã ‡§ó‡§à ‡§π‡•à!`, 'status');\n        addMessage('bot', `‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§®‡§Ç‡§¨‡§∞: ${data.complaintId}`, 'text', {\n          complaintId: data.complaintId\n        });\n        setCurrentStep('‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§π‡•ã ‡§ó‡§à');\n        // Auto end call after 5 seconds\n        setTimeout(() => endCall(), 5000);\n        break;\n      case 'summary':\n        addMessage('bot', data.message, 'status');\n        break;\n      case 'final_message':\n        addMessage('bot', data.message, 'status');\n        break;\n      case 'error':\n        addMessage('bot', data.message, 'error');\n        setCallStatus('error');\n        break;\n      case 'retry':\n        addMessage('system', data.message, 'status');\n        break;\n      case 'validation_error':\n        addMessage('bot', data.message, 'error');\n        break;\n      case 'session_ended':\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§à', 'status');\n        endCall();\n        break;\n      case 'heartbeat':\n        // Keep connection alive, don't show to user\n        break;\n      default:\n        console.log('Unknown message type:', data.type, data);\n    }\n  }, [addMessage]);\n  const endCall = async () => {\n    try {\n      // Stop backend session\n      if (sessionId) {\n        await fetch('http://localhost:5000/api/stop-voice-session', {\n          method: 'POST',\n          credentials: 'include'\n        });\n      }\n    } catch (error) {\n      console.error('Error stopping session:', error);\n    }\n\n    // Cleanup local state\n    if (eventSourceRef.current) {\n      eventSourceRef.current.close();\n      eventSourceRef.current = null;\n    }\n    if (callTimerRef.current) {\n      clearInterval(callTimerRef.current);\n      callTimerRef.current = null;\n    }\n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n      reconnectTimeoutRef.current = null;\n    }\n    setCallActive(false);\n    setCallConnecting(false);\n    setIsListening(false);\n    setIsProcessing(false);\n    setIsSpeaking(false);\n    setCurrentStep('');\n    setSessionId(null);\n    callStartTimeRef.current = null;\n    setCallDuration(0);\n    if (callStatus !== 'completed') {\n      setCallStatus('idle');\n      addMessage('system', '‡§ï‡•â‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§à', 'status');\n    }\n  };\n  const formatMessage = msg => {\n    if (msg.type === 'json') {\n      try {\n        const data = JSON.parse(msg.message);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-blue-800 mb-2\",\n            children: \"\\u0936\\u093F\\u0915\\u093E\\u092F\\u0924 \\u0915\\u093E \\u0935\\u093F\\u0935\\u0930\\u0923:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-1 text-sm\",\n            children: [data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"\\u0928\\u093E\\u092E:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 20\n              }, this), \" \", data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"]]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 536,\n              columnNumber: 17\n            }, this), data[\"‡§∏‡•ç‡§•‡§æ‡§®\"] && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"\\u0938\\u094D\\u0925\\u093E\\u0928:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 539,\n                columnNumber: 20\n              }, this), \" \", data[\"‡§∏‡•ç‡§•‡§æ‡§®\"]]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 539,\n              columnNumber: 17\n            }, this), data[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"] && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"\\u0935\\u093F\\u092D\\u093E\\u0917:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 542,\n                columnNumber: 20\n              }, this), \" \", data[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"]]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 542,\n              columnNumber: 17\n            }, this), data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"\\u0936\\u093F\\u0915\\u093E\\u092F\\u0924:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 545,\n                columnNumber: 20\n              }, this), \" \", data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"]]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 17\n            }, this), data[\"‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞\"] && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"\\u092E\\u094B\\u092C\\u093E\\u0907\\u0932:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 20\n              }, this), \" \", data[\"‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞\"]]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 548,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 534,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 11\n        }, this);\n      } catch (e) {\n        return /*#__PURE__*/_jsxDEV(\"pre\", {\n          className: \"text-xs bg-gray-100 p-2 rounded overflow-x-auto\",\n          children: msg.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 16\n        }, this);\n      }\n    }\n    return msg.message;\n  };\n  const getMessageIcon = msg => {\n    if (msg.sender === 'bot') {\n      if (msg.type === 'error') return /*#__PURE__*/_jsxDEV(AlertCircle, {\n        className: \"w-4 h-4 text-red-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 40\n      }, this);\n      if (msg.type === 'status') return /*#__PURE__*/_jsxDEV(CheckCircle, {\n        className: \"w-4 h-4 text-green-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 41\n      }, this);\n      return /*#__PURE__*/_jsxDEV(Bot, {\n        className: \"w-4 h-4 text-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 14\n      }, this);\n    }\n    if (msg.sender === 'system') {\n      return /*#__PURE__*/_jsxDEV(Signal, {\n        className: \"w-4 h-4 text-gray-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(User, {\n      className: \"w-4 h-4 text-purple-500\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 569,\n      columnNumber: 12\n    }, this);\n  };\n  const getCallStatusColor = () => {\n    switch (callStatus) {\n      case 'connecting':\n        return 'text-yellow-600 bg-yellow-100 border-yellow-200';\n      case 'active':\n        return 'text-green-600 bg-green-100 border-green-200';\n      case 'processing':\n        return 'text-blue-600 bg-blue-100 border-blue-200';\n      case 'completed':\n        return 'text-green-600 bg-green-100 border-green-200';\n      case 'error':\n        return 'text-red-600 bg-red-100 border-red-200';\n      default:\n        return 'text-gray-600 bg-gray-100 border-gray-200';\n    }\n  };\n  const getCallStatusText = () => {\n    switch (callStatus) {\n      case 'connecting':\n        return '‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...';\n      case 'active':\n        return '‡§ï‡•â‡§≤ ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø';\n      case 'processing':\n        return '‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à';\n      case 'completed':\n        return '‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡•Ç‡§∞‡•ç‡§£';\n      case 'error':\n        return '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ';\n      default:\n        return '‡§§‡•à‡§Ø‡§æ‡§∞';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto mt-6 p-6 bg-white rounded-xl shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(PhoneCall, {\n          className: \"w-8 h-8 text-blue-600 mr-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-3xl font-bold text-gray-900\",\n          children: \"\\u091C\\u0928\\u0924\\u093E \\u0935\\u0949\\u0907\\u0938 \\u0915\\u0949\\u0932\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 600,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600\",\n        children: \"\\u0939\\u093F\\u0902\\u0926\\u0940 \\u092E\\u0947\\u0902 \\u0905\\u092A\\u0928\\u0940 \\u0936\\u093F\\u0915\\u093E\\u092F\\u0924 \\u0915\\u0947 \\u0932\\u093F\\u090F \\u0915\\u0949\\u0932 \\u0915\\u0930\\u0947\\u0902\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 597,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex items-center justify-between p-4 rounded-lg mb-6 border ${getCallStatusColor()}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [callConnecting && /*#__PURE__*/_jsxDEV(Clock, {\n            className: \"w-5 h-5 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 32\n          }, this), callActive && !isListening && !isSpeaking && !isProcessing && /*#__PURE__*/_jsxDEV(Signal, {\n            className: \"w-5 h-5 animate-pulse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 611,\n            columnNumber: 15\n          }, this), isListening && /*#__PURE__*/_jsxDEV(Mic, {\n            className: \"w-5 h-5 animate-pulse text-green-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 613,\n            columnNumber: 29\n          }, this), isSpeaking && /*#__PURE__*/_jsxDEV(Volume2, {\n            className: \"w-5 h-5 animate-pulse text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 614,\n            columnNumber: 28\n          }, this), isProcessing && /*#__PURE__*/_jsxDEV(Clock, {\n            className: \"w-5 h-5 animate-spin text-yellow-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 615,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: currentStep || getCallStatusText()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 608,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 607,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm font-mono\",\n        children: callActive && `${formatTime(callDuration)}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 606,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center mb-6\",\n      children: !callActive && !callConnecting ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startCall,\n        disabled: callConnecting,\n        className: \"flex items-center space-x-3 bg-green-600 text-white px-8 py-4 rounded-full hover:bg-green-700 transition-colors font-medium text-lg shadow-lg transform hover:scale-105\",\n        children: [/*#__PURE__*/_jsxDEV(Phone, {\n          className: \"w-6 h-6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 634,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0915\\u0949\\u0932 \\u0936\\u0941\\u0930\\u0942 \\u0915\\u0930\\u0947\\u0902\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 629,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: endCall,\n        className: \"flex items-center space-x-3 bg-red-600 text-white px-8 py-4 rounded-full hover:bg-red-700 transition-colors font-medium text-lg shadow-lg transform hover:scale-105\",\n        children: [/*#__PURE__*/_jsxDEV(PhoneOff, {\n          className: \"w-6 h-6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 642,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0915\\u0949\\u0932 \\u0938\\u092E\\u093E\\u092A\\u094D\\u0924 \\u0915\\u0930\\u0947\\u0902\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 643,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 627,\n      columnNumber: 7\n    }, this), connectionError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 652,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"\\u0915\\u0928\\u0947\\u0915\\u094D\\u0936\\u0928 \\u090F\\u0930\\u0930: \", connectionError]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 653,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 651,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 650,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: conversationRef,\n      className: \"bg-gray-900 text-white rounded-lg p-4 h-96 overflow-y-auto border border-gray-700\",\n      style: {\n        background: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)',\n        fontFamily: 'monospace'\n      },\n      children: conversation.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-full text-gray-400\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(PhoneCall, {\n            className: \"w-12 h-12 mx-auto mb-3 text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 670,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u0915\\u0949\\u0932 \\u0932\\u0949\\u0917 \\u092F\\u0939\\u093E\\u0901 \\u0926\\u093F\\u0916\\u093E\\u0908 \\u091C\\u093E\\u090F\\u0917\\u093E...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 671,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 669,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 668,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: conversation.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0 text-xs text-gray-400 w-16\",\n            children: msg.timestamp.toLocaleTimeString('hi-IN', {\n              hour12: false,\n              hour: '2-digit',\n              minute: '2-digit',\n              second: '2-digit'\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex-shrink-0 p-1 rounded-full ${msg.sender === 'user' ? 'bg-purple-600' : msg.sender === 'system' ? 'bg-gray-600' : msg.type === 'error' ? 'bg-red-600' : msg.type === 'status' ? 'bg-green-600' : 'bg-blue-600'}`,\n            children: getMessageIcon(msg)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-sm ${msg.sender === 'user' ? 'text-purple-300' : msg.sender === 'system' ? 'text-gray-300' : msg.type === 'error' ? 'text-red-300' : msg.type === 'status' ? 'text-green-300' : 'text-blue-300'}`,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: [msg.sender === 'user' ? '‡§Ü‡§™' : msg.sender === 'system' ? '‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ' : '‡§¨‡•â‡§ü', \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 709,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 698,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-white text-sm mt-1 break-words\",\n              children: formatMessage(msg)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 714,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 17\n          }, this)]\n        }, msg.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 677,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 675,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 659,\n      columnNumber: 7\n    }, this), callActive && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex items-center justify-center space-x-4 text-sm\",\n      children: [isListening && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2 bg-green-100 px-4 py-2 rounded-full border border-green-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-2 h-2 bg-green-500 rounded-full animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 729,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Mic, {\n          className: \"w-4 h-4 text-green-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 730,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-green-700 font-medium\",\n          children: \"\\u0938\\u0941\\u0928 \\u0930\\u0939\\u0947 \\u0939\\u0948\\u0902...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 731,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 728,\n        columnNumber: 13\n      }, this), isSpeaking && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2 bg-blue-100 px-4 py-2 rounded-full border border-blue-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 736,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Volume2, {\n          className: \"w-4 h-4 text-blue-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 737,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-blue-700 font-medium\",\n          children: \"\\u092C\\u0949\\u091F \\u092C\\u094B\\u0932 \\u0930\\u0939\\u093E \\u0939\\u0948...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 738,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 735,\n        columnNumber: 13\n      }, this), isProcessing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2 bg-yellow-100 px-4 py-2 rounded-full border border-yellow-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-2 h-2 bg-yellow-500 rounded-full animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 743,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Clock, {\n          className: \"w-4 h-4 text-yellow-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 744,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-yellow-700 font-medium\",\n          children: \"\\u092A\\u094D\\u0930\\u094B\\u0938\\u0947\\u0938\\u093F\\u0902\\u0917...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 745,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 742,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 726,\n      columnNumber: 9\n    }, this), complaintId && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-green-800 flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 757,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u0936\\u093F\\u0915\\u093E\\u092F\\u0924 \\u0938\\u092B\\u0932\\u0924\\u093E\\u092A\\u0942\\u0930\\u094D\\u0935\\u0915 \\u0926\\u0930\\u094D\\u091C!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 758,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 756,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-green-700 mt-1\",\n            children: [\"\\u0906\\u092A\\u0915\\u093E \\u0936\\u093F\\u0915\\u093E\\u092F\\u0924 \\u0928\\u0902\\u092C\\u0930: \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-mono font-bold text-lg\",\n              children: complaintId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 761,\n              columnNumber: 35\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 760,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-green-600 text-sm mt-1\",\n            children: \"\\u0915\\u0943\\u092A\\u092F\\u093E \\u0907\\u0938 \\u0928\\u0902\\u092C\\u0930 \\u0915\\u094B \\u0905\\u092A\\u0928\\u0947 \\u092A\\u093E\\u0938 \\u0938\\u0941\\u0930\\u0915\\u094D\\u0937\\u093F\\u0924 \\u0930\\u0916\\u0947\\u0902\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 763,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 755,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 754,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 753,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setAudioEnabled(!audioEnabled),\n        className: `flex items-center space-x-2 px-4 py-2 rounded-lg text-sm ${audioEnabled ? 'bg-green-100 text-green-700 hover:bg-green-200' : 'bg-red-100 text-red-700 hover:bg-red-200'} transition-colors`,\n        children: [audioEnabled ? /*#__PURE__*/_jsxDEV(Volume2, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 781,\n          columnNumber: 27\n        }, this) : /*#__PURE__*/_jsxDEV(VolumeX, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 781,\n          columnNumber: 61\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: audioEnabled ? '‡§Ü‡§µ‡§æ‡§ú‡§º ‡§ö‡§æ‡§≤‡•Ç' : '‡§Ü‡§µ‡§æ‡§ú‡§º ‡§¨‡§Ç‡§¶'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 782,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 773,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 772,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 595,\n    columnNumber: 5\n  }, this);\n}\n_s(VoiceComplaint, \"pbzDJFHUv2AcCaG5Qk3ofTLwdII=\");\n_c = VoiceComplaint;\nvar _c;\n$RefreshReg$(_c, \"VoiceComplaint\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Phone","PhoneOff","Mic","MicOff","Volume2","VolumeX","User","Bot","CheckCircle","AlertCircle","Clock","Signal","PhoneCall","jsxDEV","_jsxDEV","VoiceComplaint","_s","conversation","setConversation","isListening","setIsListening","isProcessing","setIsProcessing","isSpeaking","setIsSpeaking","callActive","setCallActive","callConnecting","setCallConnecting","complaintId","setComplaintId","callStatus","setCallStatus","audioEnabled","setAudioEnabled","currentStep","setCurrentStep","sessionId","setSessionId","connectionError","setConnectionError","callDuration","setCallDuration","conversationRef","eventSourceRef","callStartTimeRef","callTimerRef","reconnectTimeoutRef","maxReconnectAttempts","reconnectAttempts","current","scrollTop","scrollHeight","setInterval","elapsed","Math","floor","Date","now","clearInterval","endCall","clearTimeout","formatTime","seconds","mins","secs","toString","padStart","addMessage","sender","message","type","metadata","newMessage","id","random","timestamp","prev","startCall","response","fetch","method","credentials","headers","ok","Error","status","data","json","success","error","session_id","Promise","resolve","setTimeout","setupSSEConnection","console","close","EventSource","withCredentials","onopen","log","onmessage","event","JSON","parse","handleRealtimeUpdate","onerror","step","speakingDuration","max","length","stringify","complaintData","formatMessage","msg","className","children","fileName","_jsxFileName","lineNumber","columnNumber","e","getMessageIcon","getCallStatusColor","getCallStatusText","onClick","disabled","ref","style","background","fontFamily","map","toLocaleTimeString","hour12","hour","minute","second","_c","$RefreshReg$"],"sources":["D:/Kunal Files/projects/janta_voice_final/frontend/src/pages/VoiceComplaint.jsx"],"sourcesContent":["// // import React, { useState } from \"react\";\r\n// // import axios from \"axios\";\r\n\r\n// // export default function VoiceComplaint() {\r\n// //   const [logs, setLogs] = useState([]);\r\n// //   const [loading, setLoading] = useState(false);\r\n// //   const [complaintId, setComplaintId] = useState(null);\r\n// //   const [submitted, setSubmitted] = useState(false);\r\n\r\n// //   const appendLog = (line) => {\r\n// //     setLogs((prev) => [...prev, line]);\r\n// //   };\r\n\r\n// //   const handleVoiceComplaint = async () => {\r\n// //     setLoading(true);\r\n// //     setLogs([\"üéôÔ∏è Voice complaint started...\"]);\r\n// //     setSubmitted(false);\r\n// //     setComplaintId(null);\r\n\r\n// //     try {\r\n// //       // 1. Trigger the Python voice bot and get structured data\r\n// //       const voiceRes = await axios.get(\"http://localhost:5000/api/\");\r\n// //       if (voiceRes.data.status !== \"success\") {\r\n// //         appendLog(\"‚ùå Voice bot error: \" + voiceRes.data.message);\r\n// //         return;\r\n// //       }\r\n\r\n// //       const complaintData = voiceRes.data.data;\r\n// //       appendLog(\"‚úÖ Voice bot finished. Data:\");\r\n// //       appendLog(JSON.stringify(complaintData, null, 2));\r\n\r\n// //       // 2. Send that same data to the complaints endpoint\r\n// //       const formRes = await axios.post(\r\n// //         \"http://localhost:5000/api/complaint\",\r\n// //         {\r\n// //           name: complaintData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] || complaintData.name,\r\n// //           complaint: complaintData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] || complaintData.complaint,\r\n// //           location: complaintData[\"‡§∏‡•ç‡§•‡§æ‡§®\"] || complaintData.location,\r\n// //           // map any other fields if needed\r\n// //         }\r\n// //       );\r\n\r\n// //       // 3. Capture and display the Complaint ID\r\n// //       const newId = formRes.data.complaintId || formRes.data.complaintId;\r\n// //       setComplaintId(newId);\r\n// //       setSubmitted(true);\r\n// //       appendLog(`üì¨ Complaint submitted. ID: ${newId}`);\r\n// //     } catch (err) {\r\n// //       appendLog(\"‚ùå Error: \" + err.message);\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   return (\r\n// //     <div className=\"max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow\">\r\n// //       <h2 className=\"text-2xl font-semibold mb-4\">Voice Complaint</h2>\r\n// //       <button\r\n// //         onClick={handleVoiceComplaint}\r\n// //         disabled={loading}\r\n// //         className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50\"\r\n// //       >\r\n// //         {loading ? \"Processing...\" : \"Start Voice Complaint\"}\r\n// //       </button>\r\n\r\n// //       <div className=\"mt-6 bg-gray-900 text-green-200 p-4 rounded font-mono h-48 overflow-y-scroll\">\r\n// //         {logs.map((line, i) => (\r\n// //           <div key={i}>{line}</div>\r\n// //         ))}\r\n// //       </div>\r\n\r\n// //       {submitted && (\r\n// //         <div className=\"mt-6 text-green-700 font-semibold\">\r\n// //           Complaint submitted successfully!<br />\r\n// //           Your Complaint ID: <span className=\"font-bold\">{complaintId}</span>\r\n// //         </div>\r\n// //       )}\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n\r\n\r\n// import React, { useState } from \"react\";\r\n// import axios from \"axios\";\r\n\r\n// export default function VoiceComplaint() {\r\n//   // 1. State mirrors ComplaintForm\r\n//   const [formData, setFormData] = useState({\r\n//     name: \"\",\r\n//     complaint: \"\",\r\n//     location: \"\",\r\n//     urgency: \"normal\",\r\n//   });\r\n\r\n//   const [complaintId, setComplaintId] = useState(null);\r\n//   const [submitted, setSubmitted] = useState(false);\r\n//   const [logs, setLogs] = useState([]);\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   // helper to append to console‚Äëstyle logs\r\n//   const appendLog = (line) => setLogs((prev) => [...prev, line]);\r\n\r\n//   const handleVoiceComplaint = async () => {\r\n//     setLoading(true);\r\n//     setLogs([\"üéôÔ∏è Starting voice complaint...\"]);\r\n//     setSubmitted(false);\r\n//     setComplaintId(null);\r\n\r\n//     try {\r\n//       // 2. Trigger your backend voice route\r\n//       const voiceRes = await axios.get(\"http://localhost:5000/api/voice-complaint\");\r\n//       if (voiceRes.data.status !== \"success\") {\r\n//         appendLog(\"Thank You!\");\r\n//         return;\r\n//       }\r\n\r\n//       // 3. Pull out structured data\r\n//       const data = voiceRes.data.data;\r\n//       appendLog(\"‚úÖ Voice data received:\");\r\n//       appendLog(JSON.stringify(data, null, 2));\r\n\r\n\r\n//       // // 4. Map it into the exact same formData shape\r\n//       // const mapped = {\r\n//       //   name: data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] || \"\",\r\n//       //   location: data[\"‡§∏‡•ç‡§•‡§æ‡§®\"] || \"\",\r\n//       //   department: data[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"] || \"\",\r\n//       //   description: data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] || \"\",\r\n//       //   urgency: \"normal\",\r\n//       // };\r\n\r\n//       const aiData = voiceRes.data.data;\r\n\r\n//       const payload = {\r\n//         name: aiData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] || \"\",\r\n//         location: aiData[\"‡§∏‡•ç‡§•‡§æ‡§®\"] || \"\",\r\n//         department: aiData[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"] || \"\",\r\n//         description: aiData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] || \"\",\r\n//       };\r\n\r\n//       await axios.post(\"http://localhost:5000/api/complaint\", payload);\r\n\r\n\r\n//       setFormData(mapped);\r\n\r\n//       // 5. POST to the same endpoint as ComplaintForm\r\n//       const res = await axios.post(\"http://localhost:5000/api/complaint\", mapped);\r\n//       setComplaintId(res.data.complaintId);\r\n//       setSubmitted(true);\r\n//       appendLog(`üì¨ Complaint submitted. ID: ${res.data.complaintId}`);\r\n//     } catch (err) {\r\n//       appendLog(\"‚ùå Submission error: \" + err.message);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow\">\r\n//       <h2 className=\"text-2xl font-semibold mb-4\">Voice Complaint</h2>\r\n\r\n//       {/* Start button */}\r\n//       <button\r\n//         onClick={handleVoiceComplaint}\r\n//         disabled={loading}\r\n//         className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50\"\r\n//       >\r\n//         {loading ? \"Processing...\" : \"Start Voice Complaint\"}\r\n//       </button>\r\n\r\n//       {/* Console logs */}\r\n//       <div className=\"mt-4 bg-gray-900 text-green-200 p-4 rounded font-mono h-48 overflow-y-scroll\">\r\n//         {logs.length === 0 ? <div>Logs will appear here...</div> : logs.map((l, i) => <div key={i}>{l}</div>)}\r\n//       </div>\r\n\r\n//       {/* Confirmation */}\r\n//       {submitted && (\r\n//         <div className=\"mt-6 text-green-700 font-semibold\">\r\n//           Complaint submitted successfully!<br />\r\n//           Your Complaint ID: <span className=\"font-bold\">{complaintId}</span>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { \r\n  Phone, \r\n  PhoneOff, \r\n  Mic, \r\n  MicOff, \r\n  Volume2, \r\n  VolumeX, \r\n  User, \r\n  Bot, \r\n  CheckCircle, \r\n  AlertCircle, \r\n  Clock,\r\n  Signal,\r\n  PhoneCall\r\n} from \"lucide-react\";\r\n\r\nexport default function VoiceComplaint() {\r\n  const [conversation, setConversation] = useState([]);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [isSpeaking, setIsSpeaking] = useState(false);\r\n  const [callActive, setCallActive] = useState(false);\r\n  const [callConnecting, setCallConnecting] = useState(false);\r\n  const [complaintId, setComplaintId] = useState(null);\r\n  const [callStatus, setCallStatus] = useState('idle'); // idle, connecting, active, completed, error\r\n  const [audioEnabled, setAudioEnabled] = useState(true);\r\n  const [currentStep, setCurrentStep] = useState('');\r\n  const [sessionId, setSessionId] = useState(null);\r\n  const [connectionError, setConnectionError] = useState(null);\r\n  const [callDuration, setCallDuration] = useState(0);\r\n  \r\n  const conversationRef = useRef(null);\r\n  const eventSourceRef = useRef(null);\r\n  const callStartTimeRef = useRef(null);\r\n  const callTimerRef = useRef(null);\r\n  const reconnectTimeoutRef = useRef(null);\r\n  const maxReconnectAttempts = 3;\r\n  const reconnectAttempts = useRef(0);\r\n\r\n  // Auto-scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    if (conversationRef.current) {\r\n      conversationRef.current.scrollTop = conversationRef.current.scrollHeight;\r\n    }\r\n  }, [conversation]);\r\n\r\n  // Call duration timer\r\n  useEffect(() => {\r\n    if (callActive && callStartTimeRef.current) {\r\n      callTimerRef.current = setInterval(() => {\r\n        const elapsed = Math.floor((Date.now() - callStartTimeRef.current) / 1000);\r\n        setCallDuration(elapsed);\r\n      }, 1000);\r\n    } else {\r\n      if (callTimerRef.current) {\r\n        clearInterval(callTimerRef.current);\r\n        callTimerRef.current = null;\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (callTimerRef.current) {\r\n        clearInterval(callTimerRef.current);\r\n      }\r\n    };\r\n  }, [callActive]);\r\n\r\n  // Cleanup on component unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      endCall();\r\n      if (reconnectTimeoutRef.current) {\r\n        clearTimeout(reconnectTimeoutRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const addMessage = useCallback((sender, message, type = 'text', metadata = {}) => {\r\n    const newMessage = {\r\n      id: Date.now() + Math.random(),\r\n      sender, // 'bot' or 'user'\r\n      message,\r\n      type, // 'text', 'status', 'json', 'error', 'system'\r\n      timestamp: new Date(),\r\n      metadata\r\n    };\r\n    setConversation(prev => [...prev, newMessage]);\r\n  }, []);\r\n\r\n  const startCall = async () => {\r\n    try {\r\n      setCallConnecting(true);\r\n      setCallStatus('connecting');\r\n      setConversation([]);\r\n      setConnectionError(null);\r\n      reconnectAttempts.current = 0;\r\n      \r\n      addMessage('system', '‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...', 'status');\r\n      \r\n      // Start voice session\r\n      const response = await fetch('http://localhost:5000/api/start-voice-session', { \r\n        method: 'POST',\r\n        credentials: 'include',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      \r\n      if (!data.success) {\r\n        throw new Error(data.error || 'Failed to start session');\r\n      }\r\n\r\n      setSessionId(data.session_id);\r\n      \r\n      // Wait a moment for session to initialize\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      // Start SSE connection\r\n      await setupSSEConnection();\r\n      \r\n    } catch (error) {\r\n      console.error('Error starting call:', error);\r\n      setConnectionError(error.message);\r\n      addMessage('system', `‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ: ${error.message}`, 'error');\r\n      setCallConnecting(false);\r\n      setCallStatus('error');\r\n    }\r\n  };\r\n\r\n  const setupSSEConnection = async () => {\r\n    try {\r\n      // Close existing connection\r\n      if (eventSourceRef.current) {\r\n        eventSourceRef.current.close();\r\n      }\r\n\r\n      eventSourceRef.current = new EventSource('http://localhost:5000/api/voice-complaint-stream', {\r\n        withCredentials: true\r\n      });\r\n      \r\n      eventSourceRef.current.onopen = () => {\r\n        console.log('SSE connection opened');\r\n        setCallConnecting(false);\r\n        setCallActive(true);\r\n        setCallStatus('active');\r\n        callStartTimeRef.current = Date.now();\r\n        setCallDuration(0);\r\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§ó‡§à ‡§π‡•à', 'status');\r\n        reconnectAttempts.current = 0;\r\n      };\r\n\r\n      eventSourceRef.current.onmessage = (event) => {\r\n        try {\r\n          const data = JSON.parse(event.data);\r\n          handleRealtimeUpdate(data);\r\n        } catch (error) {\r\n          console.error('Error parsing SSE data:', error);\r\n        }\r\n      };\r\n\r\n      eventSourceRef.current.onerror = (error) => {\r\n        console.error('SSE Error:', error);\r\n        \r\n        if (reconnectAttempts.current < maxReconnectAttempts) {\r\n          addMessage('system', '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ, ‡§™‡•Å‡§®‡§É ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...', 'status');\r\n          reconnectAttempts.current += 1;\r\n          \r\n          reconnectTimeoutRef.current = setTimeout(() => {\r\n            if (callActive) {\r\n              setupSSEConnection();\r\n            }\r\n          }, 2000 * reconnectAttempts.current); // Exponential backoff\r\n        } else {\r\n          addMessage('system', '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç‡•§', 'error');\r\n          endCall();\r\n        }\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('Error setting up SSE:', error);\r\n      setConnectionError(error.message);\r\n      endCall();\r\n    }\r\n  };\r\n\r\n  const handleRealtimeUpdate = useCallback((data) => {\r\n    if (!data || !data.type) return;\r\n\r\n    console.log('Received update:', data.type, data);\r\n\r\n    switch (data.type) {\r\n      case 'connected':\r\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•Å‡§à', 'status');\r\n        break;\r\n\r\n      case 'bot_question':\r\n      case 'bot_speaking':\r\n        setIsSpeaking(true);\r\n        setCurrentStep(data.step || '‡§¨‡•ã‡§ü ‡§¨‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à');\r\n        addMessage('bot', data.message, 'text', { step: data.step });\r\n        // Simulate speaking duration based on message length\r\n        const speakingDuration = Math.max(2000, data.message.length * 100);\r\n        setTimeout(() => setIsSpeaking(false), speakingDuration);\r\n        break;\r\n        \r\n      case 'listening_start':\r\n        setIsListening(true);\r\n        setIsSpeaking(false);\r\n        setIsProcessing(false);\r\n        setCurrentStep('‡§Ü‡§™‡§ï‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•Å‡§® ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');\r\n        addMessage('system', '‡§Ö‡§¨ ‡§¨‡•ã‡§≤‡•á‡§Ç...', 'status');\r\n        break;\r\n        \r\n      case 'listening_end':\r\n        setIsListening(false);\r\n        setCurrentStep('‡§Ü‡§™‡§ï‡•Ä ‡§¨‡§æ‡§§ ‡§∏‡§Æ‡§ù ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');\r\n        break;\r\n        \r\n      case 'user_response':\r\n        setIsProcessing(false);\r\n        addMessage('user', data.message, 'text');\r\n        setCurrentStep('');\r\n        break;\r\n        \r\n      case 'processing':\r\n        setIsProcessing(true);\r\n        setCurrentStep(data.message || '‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó...');\r\n        break;\r\n        \r\n      case 'complaint_structured':\r\n        setCallStatus('processing');\r\n        addMessage('bot', '‡§Ü‡§™‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•ã ‡§ó‡§Ø‡§æ:', 'status');\r\n        if (data.data) {\r\n          addMessage('bot', JSON.stringify(data.data, null, 2), 'json', { complaintData: data.data });\r\n        }\r\n        break;\r\n        \r\n      case 'complaint_submitted':\r\n        setCallStatus('completed');\r\n        setComplaintId(data.complaintId);\r\n        addMessage('bot', `‡§Ü‡§™‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§¶‡§∞‡•ç‡§ú ‡§π‡•ã ‡§ó‡§à ‡§π‡•à!`, 'status');\r\n        addMessage('bot', `‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§®‡§Ç‡§¨‡§∞: ${data.complaintId}`, 'text', { complaintId: data.complaintId });\r\n        setCurrentStep('‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§π‡•ã ‡§ó‡§à');\r\n        // Auto end call after 5 seconds\r\n        setTimeout(() => endCall(), 5000);\r\n        break;\r\n        \r\n      case 'summary':\r\n        addMessage('bot', data.message, 'status');\r\n        break;\r\n        \r\n      case 'final_message':\r\n        addMessage('bot', data.message, 'status');\r\n        break;\r\n        \r\n      case 'error':\r\n        addMessage('bot', data.message, 'error');\r\n        setCallStatus('error');\r\n        break;\r\n\r\n      case 'retry':\r\n        addMessage('system', data.message, 'status');\r\n        break;\r\n\r\n      case 'validation_error':\r\n        addMessage('bot', data.message, 'error');\r\n        break;\r\n\r\n      case 'session_ended':\r\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§à', 'status');\r\n        endCall();\r\n        break;\r\n\r\n      case 'heartbeat':\r\n        // Keep connection alive, don't show to user\r\n        break;\r\n        \r\n      default:\r\n        console.log('Unknown message type:', data.type, data);\r\n    }\r\n  }, [addMessage]);\r\n\r\n  const endCall = async () => {\r\n    try {\r\n      // Stop backend session\r\n      if (sessionId) {\r\n        await fetch('http://localhost:5000/api/stop-voice-session', { \r\n          method: 'POST',\r\n          credentials: 'include'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error stopping session:', error);\r\n    }\r\n\r\n    // Cleanup local state\r\n    if (eventSourceRef.current) {\r\n      eventSourceRef.current.close();\r\n      eventSourceRef.current = null;\r\n    }\r\n\r\n    if (callTimerRef.current) {\r\n      clearInterval(callTimerRef.current);\r\n      callTimerRef.current = null;\r\n    }\r\n\r\n    if (reconnectTimeoutRef.current) {\r\n      clearTimeout(reconnectTimeoutRef.current);\r\n      reconnectTimeoutRef.current = null;\r\n    }\r\n\r\n    setCallActive(false);\r\n    setCallConnecting(false);\r\n    setIsListening(false);\r\n    setIsProcessing(false);\r\n    setIsSpeaking(false);\r\n    setCurrentStep('');\r\n    setSessionId(null);\r\n    callStartTimeRef.current = null;\r\n    setCallDuration(0);\r\n    \r\n    if (callStatus !== 'completed') {\r\n      setCallStatus('idle');\r\n      addMessage('system', '‡§ï‡•â‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§à', 'status');\r\n    }\r\n  };\r\n\r\n  const formatMessage = (msg) => {\r\n    if (msg.type === 'json') {\r\n      try {\r\n        const data = JSON.parse(msg.message);\r\n        return (\r\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-2\">\r\n            <h4 className=\"font-semibold text-blue-800 mb-2\">‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£:</h4>\r\n            <div className=\"space-y-1 text-sm\">\r\n              {data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] && (\r\n                <p><span className=\"font-medium\">‡§®‡§æ‡§Æ:</span> {data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"]}</p>\r\n              )}\r\n              {data[\"‡§∏‡•ç‡§•‡§æ‡§®\"] && (\r\n                <p><span className=\"font-medium\">‡§∏‡•ç‡§•‡§æ‡§®:</span> {data[\"‡§∏‡•ç‡§•‡§æ‡§®\"]}</p>\r\n              )}\r\n              {data[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"] && (\r\n                <p><span className=\"font-medium\">‡§µ‡§ø‡§≠‡§æ‡§ó:</span> {data[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"]}</p>\r\n              )}\r\n              {data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] && (\r\n                <p><span className=\"font-medium\">‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§:</span> {data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"]}</p>\r\n              )}\r\n              {data[\"‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞\"] && (\r\n                <p><span className=\"font-medium\">‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤:</span> {data[\"‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞\"]}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      } catch (e) {\r\n        return <pre className=\"text-xs bg-gray-100 p-2 rounded overflow-x-auto\">{msg.message}</pre>;\r\n      }\r\n    }\r\n    return msg.message;\r\n  };\r\n\r\n  const getMessageIcon = (msg) => {\r\n    if (msg.sender === 'bot') {\r\n      if (msg.type === 'error') return <AlertCircle className=\"w-4 h-4 text-red-500\" />;\r\n      if (msg.type === 'status') return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\r\n      return <Bot className=\"w-4 h-4 text-blue-500\" />;\r\n    }\r\n    if (msg.sender === 'system') {\r\n      return <Signal className=\"w-4 h-4 text-gray-500\" />;\r\n    }\r\n    return <User className=\"w-4 h-4 text-purple-500\" />;\r\n  };\r\n\r\n  const getCallStatusColor = () => {\r\n    switch (callStatus) {\r\n      case 'connecting': return 'text-yellow-600 bg-yellow-100 border-yellow-200';\r\n      case 'active': return 'text-green-600 bg-green-100 border-green-200';\r\n      case 'processing': return 'text-blue-600 bg-blue-100 border-blue-200';\r\n      case 'completed': return 'text-green-600 bg-green-100 border-green-200';\r\n      case 'error': return 'text-red-600 bg-red-100 border-red-200';\r\n      default: return 'text-gray-600 bg-gray-100 border-gray-200';\r\n    }\r\n  };\r\n\r\n  const getCallStatusText = () => {\r\n    switch (callStatus) {\r\n      case 'connecting': return '‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...';\r\n      case 'active': return '‡§ï‡•â‡§≤ ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø';\r\n      case 'processing': return '‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à';\r\n      case 'completed': return '‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡•Ç‡§∞‡•ç‡§£';\r\n      case 'error': return '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ';\r\n      default: return '‡§§‡•à‡§Ø‡§æ‡§∞';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto mt-6 p-6 bg-white rounded-xl shadow-lg\">\r\n      {/* Header */}\r\n      <div className=\"text-center mb-6\">\r\n        <div className=\"flex items-center justify-center mb-4\">\r\n          <PhoneCall className=\"w-8 h-8 text-blue-600 mr-3\" />\r\n          <h2 className=\"text-3xl font-bold text-gray-900\">‡§ú‡§®‡§§‡§æ ‡§µ‡•â‡§á‡§∏ ‡§ï‡•â‡§≤</h2>\r\n        </div>\r\n        <p className=\"text-gray-600\">‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç ‡§Ö‡§™‡§®‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç</p>\r\n      </div>\r\n\r\n      {/* Call Status Bar */}\r\n      <div className={`flex items-center justify-between p-4 rounded-lg mb-6 border ${getCallStatusColor()}`}>\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            {callConnecting && <Clock className=\"w-5 h-5 animate-spin\" />}\r\n            {callActive && !isListening && !isSpeaking && !isProcessing && (\r\n              <Signal className=\"w-5 h-5 animate-pulse\" />\r\n            )}\r\n            {isListening && <Mic className=\"w-5 h-5 animate-pulse text-green-600\" />}\r\n            {isSpeaking && <Volume2 className=\"w-5 h-5 animate-pulse text-blue-600\" />}\r\n            {isProcessing && <Clock className=\"w-5 h-5 animate-spin text-yellow-600\" />}\r\n            <span className=\"font-medium\">\r\n              {currentStep || getCallStatusText()}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div className=\"text-sm font-mono\">\r\n          {callActive && `${formatTime(callDuration)}`}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Call Control */}\r\n      <div className=\"flex justify-center mb-6\">\r\n        {!callActive && !callConnecting ? (\r\n          <button\r\n            onClick={startCall}\r\n            disabled={callConnecting}\r\n            className=\"flex items-center space-x-3 bg-green-600 text-white px-8 py-4 rounded-full hover:bg-green-700 transition-colors font-medium text-lg shadow-lg transform hover:scale-105\"\r\n          >\r\n            <Phone className=\"w-6 h-6\" />\r\n            <span>‡§ï‡•â‡§≤ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</span>\r\n          </button>\r\n        ) : (\r\n          <button\r\n            onClick={endCall}\r\n            className=\"flex items-center space-x-3 bg-red-600 text-white px-8 py-4 rounded-full hover:bg-red-700 transition-colors font-medium text-lg shadow-lg transform hover:scale-105\"\r\n          >\r\n            <PhoneOff className=\"w-6 h-6\" />\r\n            <span>‡§ï‡•â‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç</span>\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Connection Error */}\r\n      {connectionError && (\r\n        <div className=\"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <AlertCircle className=\"w-5 h-5\" />\r\n            <span>‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§è‡§∞‡§∞: {connectionError}</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Call Log */}\r\n      <div \r\n        ref={conversationRef}\r\n        className=\"bg-gray-900 text-white rounded-lg p-4 h-96 overflow-y-auto border border-gray-700\"\r\n        style={{\r\n          background: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)',\r\n          fontFamily: 'monospace'\r\n        }}\r\n      >\r\n        {conversation.length === 0 ? (\r\n          <div className=\"flex items-center justify-center h-full text-gray-400\">\r\n            <div className=\"text-center\">\r\n              <PhoneCall className=\"w-12 h-12 mx-auto mb-3 text-gray-500\" />\r\n              <p>‡§ï‡•â‡§≤ ‡§≤‡•â‡§ó ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§ú‡§æ‡§è‡§ó‡§æ...</p>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-3\">\r\n            {conversation.map((msg) => (\r\n              <div\r\n                key={msg.id}\r\n                className=\"flex items-start space-x-3\"\r\n              >\r\n                <div className=\"flex-shrink-0 text-xs text-gray-400 w-16\">\r\n                  {msg.timestamp.toLocaleTimeString('hi-IN', { \r\n                    hour12: false,\r\n                    hour: '2-digit',\r\n                    minute: '2-digit',\r\n                    second: '2-digit'\r\n                  })}\r\n                </div>\r\n                <div className={`flex-shrink-0 p-1 rounded-full ${\r\n                  msg.sender === 'user' ? 'bg-purple-600' : \r\n                  msg.sender === 'system' ? 'bg-gray-600' :\r\n                  msg.type === 'error' ? 'bg-red-600' :\r\n                  msg.type === 'status' ? 'bg-green-600' : 'bg-blue-600'\r\n                }`}>\r\n                  {getMessageIcon(msg)}\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                  <div className={`text-sm ${\r\n                    msg.sender === 'user' \r\n                      ? 'text-purple-300' \r\n                      : msg.sender === 'system'\r\n                      ? 'text-gray-300'\r\n                      : msg.type === 'error'\r\n                      ? 'text-red-300'\r\n                      : msg.type === 'status'\r\n                      ? 'text-green-300'\r\n                      : 'text-blue-300'\r\n                  }`}>\r\n                    <span className=\"font-medium\">\r\n                      {msg.sender === 'user' ? '‡§Ü‡§™' : \r\n                       msg.sender === 'system' ? '‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ' : '‡§¨‡•â‡§ü'}:\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"text-white text-sm mt-1 break-words\">\r\n                    {formatMessage(msg)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Current Activity Indicator */}\r\n      {callActive && (\r\n        <div className=\"mt-4 flex items-center justify-center space-x-4 text-sm\">\r\n          {isListening && (\r\n            <div className=\"flex items-center space-x-2 bg-green-100 px-4 py-2 rounded-full border border-green-200\">\r\n              <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\r\n              <Mic className=\"w-4 h-4 text-green-600\" />\r\n              <span className=\"text-green-700 font-medium\">‡§∏‡•Å‡§® ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...</span>\r\n            </div>\r\n          )}\r\n          {isSpeaking && (\r\n            <div className=\"flex items-center space-x-2 bg-blue-100 px-4 py-2 rounded-full border border-blue-200\">\r\n              <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"></div>\r\n              <Volume2 className=\"w-4 h-4 text-blue-600\" />\r\n              <span className=\"text-blue-700 font-medium\">‡§¨‡•â‡§ü ‡§¨‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à...</span>\r\n            </div>\r\n          )}\r\n          {isProcessing && (\r\n            <div className=\"flex items-center space-x-2 bg-yellow-100 px-4 py-2 rounded-full border border-yellow-200\">\r\n              <div className=\"w-2 h-2 bg-yellow-500 rounded-full animate-pulse\"></div>\r\n              <Clock className=\"w-4 h-4 text-yellow-600\" />\r\n              <span className=\"text-yellow-700 font-medium\">‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó...</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Final Result */}\r\n      {complaintId && (\r\n        <div className=\"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h3 className=\"font-semibold text-green-800 flex items-center space-x-2\">\r\n                <CheckCircle className=\"w-5 h-5\" />\r\n                <span>‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§¶‡§∞‡•ç‡§ú!</span>\r\n              </h3>\r\n              <p className=\"text-green-700 mt-1\">\r\n                ‡§Ü‡§™‡§ï‡§æ ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§®‡§Ç‡§¨‡§∞: <span className=\"font-mono font-bold text-lg\">{complaintId}</span>\r\n              </p>\r\n              <p className=\"text-green-600 text-sm mt-1\">\r\n                ‡§ï‡•É‡§™‡§Ø‡§æ ‡§á‡§∏ ‡§®‡§Ç‡§¨‡§∞ ‡§ï‡•ã ‡§Ö‡§™‡§®‡•á ‡§™‡§æ‡§∏ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§ñ‡•á‡§Ç\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Audio Controls */}\r\n      <div className=\"mt-4 flex justify-center\">\r\n        <button\r\n          onClick={() => setAudioEnabled(!audioEnabled)}\r\n          className={`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm ${\r\n            audioEnabled \r\n              ? 'bg-green-100 text-green-700 hover:bg-green-200' \r\n              : 'bg-red-100 text-red-700 hover:bg-red-200'\r\n          } transition-colors`}\r\n        >\r\n          {audioEnabled ? <Volume2 className=\"w-4 h-4\" /> : <VolumeX className=\"w-4 h-4\" />}\r\n          <span>{audioEnabled ? '‡§Ü‡§µ‡§æ‡§ú‡§º ‡§ö‡§æ‡§≤‡•Ç' : '‡§Ü‡§µ‡§æ‡§ú‡§º ‡§¨‡§Ç‡§¶'}</span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":";;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,WAAW,QAAQ,OAAO;AACvE,SACEC,KAAK,EACLC,QAAQ,EACRC,GAAG,EACHC,MAAM,EACNC,OAAO,EACPC,OAAO,EACPC,IAAI,EACJC,GAAG,EACHC,WAAW,EACXC,WAAW,EACXC,KAAK,EACLC,MAAM,EACNC,SAAS,QACJ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtB,eAAe,SAASC,cAAcA,CAAA,EAAG;EAAAC,EAAA;EACvC,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGtB,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACuB,WAAW,EAAEC,cA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
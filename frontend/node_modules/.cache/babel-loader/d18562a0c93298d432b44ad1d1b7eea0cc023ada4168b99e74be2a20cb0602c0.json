{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ComplaintForm(){const[formData,setFormData]=useState({name:\"\",complaint:\"\",location:\"\",urgency:\"normal\",department:\"\"});const[photo,setPhoto]=useState(null);const[complaintId,setComplaintId]=useState(null);const[submitted,setSubmitted]=useState(false);const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};// file ya live photo select/capture karna\nconst handlePhotoChange=e=>{if(e.target.files&&e.target.files[0]){setPhoto(e.target.files[0]);}};const handleSubmit=async e=>{e.preventDefault();try{const formDataToSend=new FormData();Object.keys(formData).forEach(key=>{formDataToSend.append(key,formData[key]);});if(photo){formDataToSend.append(\"photo\",photo);}const res=await axios.post(\"http://localhost:5000/api/complaint\",formDataToSend,{headers:{\"Content-Type\":\"multipart/form-data\"}});setComplaintId(res.data.complaintId);setSubmitted(true);// reset\nsetFormData({name:\"\",complaint:\"\",location:\"\",urgency:\"normal\",department:\"\"});setPhoto(null);}catch(err){console.error(\"Submission failed:\",err.message);alert(\"Complaint submission failed. Try again.\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-4\",children:\"Complaint Form\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{name:\"name\",value:formData.name,onChange:handleChange,placeholder:\"Your Name\",required:true,className:\"w-full border px-3 py-2 rounded\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"complaint\",value:formData.complaint,onChange:handleChange,placeholder:\"Describe your complaint\",required:true,className:\"w-full border px-3 py-2 rounded\"}),/*#__PURE__*/_jsx(\"input\",{name:\"location\",value:formData.location,onChange:handleChange,placeholder:\"Location\",required:true,className:\"w-full border px-3 py-2 rounded\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"department\",value:formData.department,onChange:handleChange,className:\"w-full border px-3 py-2 rounded\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select a Department\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Public Works\",children:\"Public Works\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Water Supply\",children:\"Water Supply\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Sanitation\",children:\"Sanitation\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Electricity\",children:\"Electricity\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Other\",children:\"Other\"})]}),/*#__PURE__*/_jsxs(\"select\",{name:\"urgency\",value:formData.urgency,onChange:handleChange,className:\"w-full border px-3 py-2 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"normal\",children:\"Normal\"}),/*#__PURE__*/_jsx(\"option\",{value:\"urgent\",children:\"Urgent\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Upload/Click Photo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",capture:\"environment\",onChange:handlePhotoChange,className:\"w-full border px-3 py-2 rounded\"}),photo&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Selected: \",photo.name]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\",children:\"Submit\"})]}),submitted&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 text-green-700 font-semibold\",children:[\"Complaint submitted successfully!\",/*#__PURE__*/_jsx(\"br\",{}),\"Your Complaint ID: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-bold\",children:complaintId})]})]});}","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","ComplaintForm","formData","setFormData","name","complaint","location","urgency","department","photo","setPhoto","complaintId","setComplaintId","submitted","setSubmitted","handleChange","e","target","value","handlePhotoChange","files","handleSubmit","preventDefault","formDataToSend","FormData","Object","keys","forEach","key","append","res","post","headers","data","err","console","error","message","alert","className","children","onSubmit","onChange","placeholder","required","type","accept","capture"],"sources":["C:/Users/Lenovo/Documents/EcoSarthi-main/frontend/src/pages/ComplaintChoice.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nexport default function ComplaintForm() {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    complaint: \"\",\n    location: \"\",\n    urgency: \"normal\",\n    department: \"\",\n  });\n\n  const [photo, setPhoto] = useState(null);\n  const [complaintId, setComplaintId] = useState(null);\n  const [submitted, setSubmitted] = useState(false);\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  // file ya live photo select/capture karna\n  const handlePhotoChange = (e) => {\n    if (e.target.files && e.target.files[0]) {\n      setPhoto(e.target.files[0]);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      const formDataToSend = new FormData();\n      Object.keys(formData).forEach((key) => {\n        formDataToSend.append(key, formData[key]);\n      });\n      if (photo) {\n        formDataToSend.append(\"photo\", photo);\n      }\n\n      const res = await axios.post(\"http://localhost:5000/api/complaint\", formDataToSend, {\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      });\n\n      setComplaintId(res.data.complaintId);\n      setSubmitted(true);\n\n      // reset\n      setFormData({\n        name: \"\",\n        complaint: \"\",\n        location: \"\",\n        urgency: \"normal\",\n        department: \"\",\n      });\n      setPhoto(null);\n    } catch (err) {\n      console.error(\"Submission failed:\", err.message);\n      alert(\"Complaint submission failed. Try again.\");\n    }\n  };\n\n  return (\n    <div className=\"max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow\">\n      <h2 className=\"text-2xl font-semibold mb-4\">Complaint Form</h2>\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\n        <input\n          name=\"name\"\n          value={formData.name}\n          onChange={handleChange}\n          placeholder=\"Your Name\"\n          required\n          className=\"w-full border px-3 py-2 rounded\"\n        />\n        <textarea\n          name=\"complaint\"\n          value={formData.complaint}\n          onChange={handleChange}\n          placeholder=\"Describe your complaint\"\n          required\n          className=\"w-full border px-3 py-2 rounded\"\n        />\n        <input\n          name=\"location\"\n          value={formData.location}\n          onChange={handleChange}\n          placeholder=\"Location\"\n          required\n          className=\"w-full border px-3 py-2 rounded\"\n        />\n\n        {/* Department */}\n        <select\n          name=\"department\"\n          value={formData.department}\n          onChange={handleChange}\n          className=\"w-full border px-3 py-2 rounded\"\n          required\n        >\n          <option value=\"\">Select a Department</option>\n          <option value=\"Public Works\">Public Works</option>\n          <option value=\"Water Supply\">Water Supply</option>\n          <option value=\"Sanitation\">Sanitation</option>\n          <option value=\"Electricity\">Electricity</option>\n          <option value=\"Other\">Other</option>\n        </select>\n\n        <select\n          name=\"urgency\"\n          value={formData.urgency}\n          onChange={handleChange}\n          className=\"w-full border px-3 py-2 rounded\"\n        >\n          <option value=\"normal\">Normal</option>\n          <option value=\"urgent\">Urgent</option>\n        </select>\n\n        {/* Photo Upload */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n            Upload/Click Photo\n          </label>\n          <input\n            type=\"file\"\n            accept=\"image/*\"\n            capture=\"environment\"\n            onChange={handlePhotoChange}\n            className=\"w-full border px-3 py-2 rounded\"\n          />\n          {photo && (\n            <p className=\"text-xs text-gray-500 mt-1\">Selected: {photo.name}</p>\n          )}\n        </div>\n\n        <button\n          type=\"submit\"\n          className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\n        >\n          Submit\n        </button>\n      </form>\n\n      {submitted && (\n        <div className=\"mt-6 text-green-700 font-semibold\">\n          Complaint submitted successfully!<br />\n          Your Complaint ID: <span className=\"font-bold\">{complaintId}</span>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState,useRef}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Chatbot(){const[messages,setMessages]=useState([{sender:\"bot\",text:\"‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Ç ‡§π‡•Ç‡§Å‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§\"}]);const[input,setInput]=useState(\"\");const[loading,setLoading]=useState(false);const[listening,setListening]=useState(false);const recognitionRef=useRef(null);const sendMessage=async()=>{if(!input.trim())return;const userMessage={sender:\"user\",text:input};const newMessages=[...messages,userMessage];setMessages(newMessages);setInput(\"\");setLoading(true);try{var _response$data;const response=await axios.post(\"http://localhost:5000/api/chat\",{message:input});const botReply=((_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.reply)||\"‡§Æ‡§æ‡§´‡§º ‡§ï‡•Ä‡§ú‡§ø‡§è, ‡§â‡§§‡•ç‡§§‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤ ‡§™‡§æ‡§Ø‡§æ‡•§\";setMessages([...newMessages,{sender:\"bot\",text:botReply}]);}catch(error){console.error(\"Chatbot API Error:\",error);setMessages([...newMessages,{sender:\"bot\",text:\"‡§Æ‡§æ‡§´‡§º ‡§ï‡•Ä‡§ú‡§ø‡§è, ‡§ï‡•Å‡§õ ‡§ó‡§≤‡§§ ‡§π‡•ã ‡§ó‡§Ø‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§\"}]);}setLoading(false);};const handleKeyDown=e=>{if(e.key===\"Enter\")sendMessage();};const startListening=()=>{const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;if(!SpeechRecognition){alert(\"Speech Recognition not supported in this browser.\");return;}if(recognitionRef.current){recognitionRef.current.stop();}const recognition=new SpeechRecognition();recognition.lang=\"hi-IN\";recognition.interimResults=false;recognition.maxAlternatives=1;recognition.onstart=()=>setListening(true);recognition.onresult=event=>{const speechToText=event.results[0][0].transcript;setInput(prevInput=>prevInput+\" \"+speechToText);};recognition.onerror=event=>{console.error(\"Voice recognition error:\",event.error);};recognition.onend=()=>setListening(false);recognitionRef.current=recognition;recognition.start();};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 py-10 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto bg-white shadow-lg rounded-xl p-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-green-700 text-center mb-6\",children:\"\\uD83D\\uDCAC \\u0938\\u0939\\u093E\\u092F\\u0924\\u093E \\u091A\\u0948\\u091F\\u092C\\u0949\\u091F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-96 overflow-y-auto space-y-4 bg-gray-50 p-4 rounded-md border\",children:[messages.map((msg,idx)=>/*#__PURE__*/_jsx(\"div\",{className:`p-3 rounded-md max-w-xs whitespace-pre-wrap ${msg.sender===\"user\"?\"bg-green-200 ml-auto text-right\":\"bg-white text-left\"}`,children:msg.text},idx)),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"\\u0909\\u0924\\u094D\\u0924\\u0930 \\u0906 \\u0930\\u0939\\u093E \\u0939\\u0948...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"flex-1 border border-gray-300 rounded-l-md px-4 py-2 focus:outline-none\",placeholder:\"\\u0905\\u092A\\u0928\\u093E \\u0938\\u0935\\u093E\\u0932 \\u0932\\u093F\\u0916\\u0947\\u0902...\",value:input,onChange:e=>setInput(e.target.value),onKeyDown:handleKeyDown}),/*#__PURE__*/_jsx(\"button\",{onClick:startListening,className:`bg-yellow-500 text-white px-4 py-2 ${listening?\"animate-pulse\":\"\"}`,title:\"Speak\",children:\"\\uD83C\\uDF99\"}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,className:\"bg-green-600 text-white px-6 py-2 rounded-r-md hover:bg-green-700\",children:\"\\u092D\\u0947\\u091C\\u0947\\u0902\"})]})]})});}","map":{"version":3,"names":["React","useState","useRef","axios","jsx","_jsx","jsxs","_jsxs","Chatbot","messages","setMessages","sender","text","input","setInput","loading","setLoading","listening","setListening","recognitionRef","sendMessage","trim","userMessage","newMessages","_response$data","response","post","message","botReply","data","reply","error","console","handleKeyDown","e","key","startListening","SpeechRecognition","window","webkitSpeechRecognition","alert","current","stop","recognition","lang","interimResults","maxAlternatives","onstart","onresult","event","speechToText","results","transcript","prevInput","onerror","onend","start","className","children","map","msg","idx","type","placeholder","value","onChange","target","onKeyDown","onClick","title"],"sources":["C:/Users/Lenovo/Documents/EcoSarthi-main/frontend/src/pages/Policies.jsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport axios from \"axios\";\n\nexport default function Chatbot() {\n  const [messages, setMessages] = useState([\n    {\n      sender: \"bot\",\n      text: \"‡§®‡§Æ‡§∏‡•ç‡§§‡•á! ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Ç ‡§π‡•Ç‡§Å‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§™‡•Ç‡§õ‡•á‡§Ç‡•§\",\n    },\n  ]);\n  const [input, setInput] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [listening, setListening] = useState(false);\n\n  const recognitionRef = useRef(null);\n\n  const sendMessage = async () => {\n    if (!input.trim()) return;\n\n    const userMessage = { sender: \"user\", text: input };\n    const newMessages = [...messages, userMessage];\n    setMessages(newMessages);\n    setInput(\"\");\n    setLoading(true);\n\n    try {\n      const response = await axios.post(\"http://localhost:5000/api/chat\", {\n        message: input,\n      });\n\n      const botReply = response.data?.reply || \"‡§Æ‡§æ‡§´‡§º ‡§ï‡•Ä‡§ú‡§ø‡§è, ‡§â‡§§‡•ç‡§§‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤ ‡§™‡§æ‡§Ø‡§æ‡•§\";\n      setMessages([...newMessages, { sender: \"bot\", text: botReply }]);\n    } catch (error) {\n      console.error(\"Chatbot API Error:\", error);\n      setMessages([\n        ...newMessages,\n        {\n          sender: \"bot\",\n          text: \"‡§Æ‡§æ‡§´‡§º ‡§ï‡•Ä‡§ú‡§ø‡§è, ‡§ï‡•Å‡§õ ‡§ó‡§≤‡§§ ‡§π‡•ã ‡§ó‡§Ø‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§\",\n        },\n      ]);\n    }\n\n    setLoading(false);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === \"Enter\") sendMessage();\n  };\n\n  const startListening = () => {\n    const SpeechRecognition =\n      window.SpeechRecognition || window.webkitSpeechRecognition;\n\n    if (!SpeechRecognition) {\n      alert(\"Speech Recognition not supported in this browser.\");\n      return;\n    }\n\n    if (recognitionRef.current) {\n      recognitionRef.current.stop();\n    }\n\n    const recognition = new SpeechRecognition();\n    recognition.lang = \"hi-IN\";\n    recognition.interimResults = false;\n    recognition.maxAlternatives = 1;\n\n    recognition.onstart = () => setListening(true);\n\n    recognition.onresult = (event) => {\n      const speechToText = event.results[0][0].transcript;\n      setInput((prevInput) => prevInput + \" \" + speechToText);\n    };\n\n    recognition.onerror = (event) => {\n      console.error(\"Voice recognition error:\", event.error);\n    };\n\n    recognition.onend = () => setListening(false);\n\n    recognitionRef.current = recognition;\n    recognition.start();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 py-10 px-4\">\n      <div className=\"max-w-3xl mx-auto bg-white shadow-lg rounded-xl p-6\">\n        <h1 className=\"text-3xl font-bold text-green-700 text-center mb-6\">\n          üí¨ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ö‡•à‡§ü‡§¨‡•â‡§ü\n        </h1>\n\n        <div className=\"h-96 overflow-y-auto space-y-4 bg-gray-50 p-4 rounded-md border\">\n          {messages.map((msg, idx) => (\n            <div\n              key={idx}\n              className={`p-3 rounded-md max-w-xs whitespace-pre-wrap ${\n                msg.sender === \"user\"\n                  ? \"bg-green-200 ml-auto text-right\"\n                  : \"bg-white text-left\"\n              }`}\n            >\n              {msg.text}\n            </div>\n          ))}\n          {loading && <p className=\"text-gray-500\">‡§â‡§§‡•ç‡§§‡§∞ ‡§Ü ‡§∞‡§π‡§æ ‡§π‡•à...</p>}\n        </div>\n\n        <div className=\"mt-4 flex\">\n          <input\n            type=\"text\"\n            className=\"flex-1 border border-gray-300 rounded-l-md px-4 py-2 focus:outline-none\"\n            placeholder=\"‡§Ö‡§™‡§®‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§≤‡§ø‡§ñ‡•á‡§Ç...\"\n            value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyDown={handleKeyDown}\n          />\n          <button\n            onClick={startListening}\n            className={`bg-yellow-500 text-white px-4 py-2 ${\n              listening ? \"animate-pulse\" : \"\"\n            }`}\n            title=\"Speak\"\n          >\n            üéô\n          </button>\n          <button\n            onClick={sendMessage}\n            className=\"bg-green-600 text-white px-6 py-2 rounded-r-md hover:bg-green-700\"\n          >\n            ‡§≠‡•á‡§ú‡•á‡§Ç\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\Kunal Files\\\\projects\\\\janta_voice_final\\\\frontend\\\\src\\\\pages\\\\VoiceComplaint.jsx\",\n  _s = $RefreshSig$();\n// // import React, { useState } from \"react\";\n// // import axios from \"axios\";\n\n// // export default function VoiceComplaint() {\n// //   const [logs, setLogs] = useState([]);\n// //   const [loading, setLoading] = useState(false);\n// //   const [complaintId, setComplaintId] = useState(null);\n// //   const [submitted, setSubmitted] = useState(false);\n\n// //   const appendLog = (line) => {\n// //     setLogs((prev) => [...prev, line]);\n// //   };\n\n// //   const handleVoiceComplaint = async () => {\n// //     setLoading(true);\n// //     setLogs([\"üéôÔ∏è Voice complaint started...\"]);\n// //     setSubmitted(false);\n// //     setComplaintId(null);\n\n// //     try {\n// //       // 1. Trigger the Python voice bot and get structured data\n// //       const voiceRes = await axios.get(\"http://localhost:5000/api/\");\n// //       if (voiceRes.data.status !== \"success\") {\n// //         appendLog(\"‚ùå Voice bot error: \" + voiceRes.data.message);\n// //         return;\n// //       }\n\n// //       const complaintData = voiceRes.data.data;\n// //       appendLog(\"‚úÖ Voice bot finished. Data:\");\n// //       appendLog(JSON.stringify(complaintData, null, 2));\n\n// //       // 2. Send that same data to the complaints endpoint\n// //       const formRes = await axios.post(\n// //         \"http://localhost:5000/api/complaint\",\n// //         {\n// //           name: complaintData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] || complaintData.name,\n// //           complaint: complaintData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] || complaintData.complaint,\n// //           location: complaintData[\"‡§∏‡•ç‡§•‡§æ‡§®\"] || complaintData.location,\n// //           // map any other fields if needed\n// //         }\n// //       );\n\n// //       // 3. Capture and display the Complaint ID\n// //       const newId = formRes.data.complaintId || formRes.data.complaintId;\n// //       setComplaintId(newId);\n// //       setSubmitted(true);\n// //       appendLog(`üì¨ Complaint submitted. ID: ${newId}`);\n// //     } catch (err) {\n// //       appendLog(\"‚ùå Error: \" + err.message);\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   return (\n// //     <div className=\"max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow\">\n// //       <h2 className=\"text-2xl font-semibold mb-4\">Voice Complaint</h2>\n// //       <button\n// //         onClick={handleVoiceComplaint}\n// //         disabled={loading}\n// //         className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50\"\n// //       >\n// //         {loading ? \"Processing...\" : \"Start Voice Complaint\"}\n// //       </button>\n\n// //       <div className=\"mt-6 bg-gray-900 text-green-200 p-4 rounded font-mono h-48 overflow-y-scroll\">\n// //         {logs.map((line, i) => (\n// //           <div key={i}>{line}</div>\n// //         ))}\n// //       </div>\n\n// //       {submitted && (\n// //         <div className=\"mt-6 text-green-700 font-semibold\">\n// //           Complaint submitted successfully!<br />\n// //           Your Complaint ID: <span className=\"font-bold\">{complaintId}</span>\n// //         </div>\n// //       )}\n// //     </div>\n// //   );\n// // }\n\n// import React, { useState } from \"react\";\n// import axios from \"axios\";\n\n// export default function VoiceComplaint() {\n//   // 1. State mirrors ComplaintForm\n//   const [formData, setFormData] = useState({\n//     name: \"\",\n//     complaint: \"\",\n//     location: \"\",\n//     urgency: \"normal\",\n//   });\n\n//   const [complaintId, setComplaintId] = useState(null);\n//   const [submitted, setSubmitted] = useState(false);\n//   const [logs, setLogs] = useState([]);\n//   const [loading, setLoading] = useState(false);\n\n//   // helper to append to console‚Äëstyle logs\n//   const appendLog = (line) => setLogs((prev) => [...prev, line]);\n\n//   const handleVoiceComplaint = async () => {\n//     setLoading(true);\n//     setLogs([\"üéôÔ∏è Starting voice complaint...\"]);\n//     setSubmitted(false);\n//     setComplaintId(null);\n\n//     try {\n//       // 2. Trigger your backend voice route\n//       const voiceRes = await axios.get(\"http://localhost:5000/api/voice-complaint\");\n//       if (voiceRes.data.status !== \"success\") {\n//         appendLog(\"Thank You!\");\n//         return;\n//       }\n\n//       // 3. Pull out structured data\n//       const data = voiceRes.data.data;\n//       appendLog(\"‚úÖ Voice data received:\");\n//       appendLog(JSON.stringify(data, null, 2));\n\n//       // // 4. Map it into the exact same formData shape\n//       // const mapped = {\n//       //   name: data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] || \"\",\n//       //   location: data[\"‡§∏‡•ç‡§•‡§æ‡§®\"] || \"\",\n//       //   department: data[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"] || \"\",\n//       //   description: data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] || \"\",\n//       //   urgency: \"normal\",\n//       // };\n\n//       const aiData = voiceRes.data.data;\n\n//       const payload = {\n//         name: aiData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] || \"\",\n//         location: aiData[\"‡§∏‡•ç‡§•‡§æ‡§®\"] || \"\",\n//         department: aiData[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"] || \"\",\n//         description: aiData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] || \"\",\n//       };\n\n//       await axios.post(\"http://localhost:5000/api/complaint\", payload);\n\n//       setFormData(mapped);\n\n//       // 5. POST to the same endpoint as ComplaintForm\n//       const res = await axios.post(\"http://localhost:5000/api/complaint\", mapped);\n//       setComplaintId(res.data.complaintId);\n//       setSubmitted(true);\n//       appendLog(`üì¨ Complaint submitted. ID: ${res.data.complaintId}`);\n//     } catch (err) {\n//       appendLog(\"‚ùå Submission error: \" + err.message);\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   return (\n//     <div className=\"max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow\">\n//       <h2 className=\"text-2xl font-semibold mb-4\">Voice Complaint</h2>\n\n//       {/* Start button */}\n//       <button\n//         onClick={handleVoiceComplaint}\n//         disabled={loading}\n//         className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50\"\n//       >\n//         {loading ? \"Processing...\" : \"Start Voice Complaint\"}\n//       </button>\n\n//       {/* Console logs */}\n//       <div className=\"mt-4 bg-gray-900 text-green-200 p-4 rounded font-mono h-48 overflow-y-scroll\">\n//         {logs.length === 0 ? <div>Logs will appear here...</div> : logs.map((l, i) => <div key={i}>{l}</div>)}\n//       </div>\n\n//       {/* Confirmation */}\n//       {submitted && (\n//         <div className=\"mt-6 text-green-700 font-semibold\">\n//           Complaint submitted successfully!<br />\n//           Your Complaint ID: <span className=\"font-bold\">{complaintId}</span>\n//         </div>\n//       )}\n//     </div>\n//   );\n// }import React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport { Phone, PhoneOff, Mic, MicOff, Volume2, VolumeX, User, Bot, CheckCircle, AlertCircle, Clock, Signal, PhoneCall, Wifi, WifiOff } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function VoiceComplaint() {\n  _s();\n  const [conversation, setConversation] = useState([]);\n  const [isListening, setIsListening] = useState(false);\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [callActive, setCallActive] = useState(false);\n  const [callConnecting, setCallConnecting] = useState(false);\n  const [complaintId, setComplaintId] = useState(null);\n  const [callStatus, setCallStatus] = useState('idle'); // idle, connecting, active, completed, error\n  const [audioEnabled, setAudioEnabled] = useState(true);\n  const [currentStep, setCurrentStep] = useState('');\n  const [sessionId, setSessionId] = useState(null);\n  const [connectionError, setConnectionError] = useState(null);\n  const [callDuration, setCallDuration] = useState(0);\n  const [backendConnected, setBackendConnected] = useState(false);\n  const conversationRef = useRef(null);\n  const eventSourceRef = useRef(null);\n  const callStartTimeRef = useRef(null);\n  const callTimerRef = useRef(null);\n  const reconnectTimeoutRef = useRef(null);\n  const maxReconnectAttempts = 3;\n  const reconnectAttempts = useRef(0);\n  const connectionCheckRef = useRef(null);\n\n  // Check backend connection on component mount\n  useEffect(() => {\n    checkBackendConnection();\n    // Check connection every 30 seconds\n    connectionCheckRef.current = setInterval(checkBackendConnection, 30000);\n    return () => {\n      if (connectionCheckRef.current) {\n        clearInterval(connectionCheckRef.current);\n      }\n    };\n  }, []);\n  const checkBackendConnection = async () => {\n    try {\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 second timeout\n\n      const response = await fetch('http://localhost:5000/api/health', {\n        method: 'GET',\n        signal: controller.signal,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      clearTimeout(timeoutId);\n      if (response.ok) {\n        setBackendConnected(true);\n        if (connectionError !== null && connectionError !== void 0 && connectionError.includes('backend')) {\n          setConnectionError(null);\n        }\n      } else {\n        throw new Error(`Backend responded with status: ${response.status}`);\n      }\n    } catch (error) {\n      console.log('Backend connection check failed:', error.message);\n      setBackendConnected(false);\n      if (error.name === 'AbortError') {\n        setConnectionError('Backend connection timeout - ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§∞‡•Ä');\n      } else {\n        setConnectionError('Backend server not available - ‡§¨‡•à‡§ï‡§è‡§Ç‡§° ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à');\n      }\n    }\n  };\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    if (conversationRef.current) {\n      conversationRef.current.scrollTop = conversationRef.current.scrollHeight;\n    }\n  }, [conversation]);\n\n  // Call duration timer\n  useEffect(() => {\n    if (callActive && callStartTimeRef.current) {\n      callTimerRef.current = setInterval(() => {\n        const elapsed = Math.floor((Date.now() - callStartTimeRef.current) / 1000);\n        setCallDuration(elapsed);\n      }, 1000);\n    } else {\n      if (callTimerRef.current) {\n        clearInterval(callTimerRef.current);\n        callTimerRef.current = null;\n      }\n    }\n    return () => {\n      if (callTimerRef.current) {\n        clearInterval(callTimerRef.current);\n      }\n    };\n  }, [callActive]);\n\n  // Cleanup on component unmount\n  useEffect(() => {\n    return () => {\n      endCall();\n      if (reconnectTimeoutRef.current) {\n        clearTimeout(reconnectTimeoutRef.current);\n      }\n      if (connectionCheckRef.current) {\n        clearInterval(connectionCheckRef.current);\n      }\n    };\n  }, []);\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n  const addMessage = useCallback((sender, message, type = 'text', metadata = {}) => {\n    const newMessage = {\n      id: Date.now() + Math.random(),\n      sender,\n      // 'bot' or 'user'\n      message,\n      type,\n      // 'text', 'status', 'json', 'error', 'system'\n      timestamp: new Date(),\n      metadata\n    };\n    setConversation(prev => [...prev, newMessage]);\n  }, []);\n  const startCall = async () => {\n    if (!backendConnected) {\n      addMessage('system', '‡§¨‡•à‡§ï‡§è‡§Ç‡§° ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§', 'error');\n      return;\n    }\n    try {\n      setCallConnecting(true);\n      setCallStatus('connecting');\n      setConversation([]);\n      setConnectionError(null);\n      reconnectAttempts.current = 0;\n      addMessage('system', '‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...', 'status');\n\n      // Start voice session with timeout\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout\n\n      const response = await fetch('http://localhost:5000/api/start-voice-session', {\n        method: 'POST',\n        signal: controller.signal,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      clearTimeout(timeoutId);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (!data.success) {\n        throw new Error(data.error || 'Failed to start session');\n      }\n      setSessionId(data.session_id);\n\n      // Wait a moment for session to initialize\n      await new Promise(resolve => setTimeout(resolve, 1000));\n\n      // Start SSE connection\n      await setupSSEConnection();\n    } catch (error) {\n      console.error('Error starting call:', error);\n      let errorMessage = '‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ';\n      if (error.name === 'AbortError') {\n        errorMessage = '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ü‡§æ‡§á‡§Æ‡§Ü‡§â‡§ü - ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç';\n      } else if (error.message.includes('Failed to fetch')) {\n        errorMessage = '‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§∏‡§ï‡§æ';\n      } else {\n        errorMessage = `‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ: ${error.message}`;\n      }\n      setConnectionError(errorMessage);\n      addMessage('system', errorMessage, 'error');\n      setCallConnecting(false);\n      setCallStatus('error');\n    }\n  };\n  const setupSSEConnection = async () => {\n    try {\n      // Close existing connection\n      if (eventSourceRef.current) {\n        eventSourceRef.current.close();\n      }\n\n      // Create EventSource without credentials to avoid CORS issues\n      eventSourceRef.current = new EventSource('http://localhost:5000/api/voice-complaint-stream');\n      eventSourceRef.current.onopen = () => {\n        console.log('SSE connection opened');\n        setCallConnecting(false);\n        setCallActive(true);\n        setCallStatus('active');\n        callStartTimeRef.current = Date.now();\n        setCallDuration(0);\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§ó‡§à ‡§π‡•à', 'status');\n        reconnectAttempts.current = 0;\n        setConnectionError(null);\n      };\n      eventSourceRef.current.onmessage = event => {\n        try {\n          const data = JSON.parse(event.data);\n          handleRealtimeUpdate(data);\n        } catch (error) {\n          console.error('Error parsing SSE data:', error);\n          addMessage('system', '‡§°‡•á‡§ü‡§æ ‡§™‡§æ‡§∞‡•ç‡§∏‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ', 'error');\n        }\n      };\n      eventSourceRef.current.onerror = error => {\n        var _eventSourceRef$curre;\n        console.error('SSE Error:', error);\n        if (((_eventSourceRef$curre = eventSourceRef.current) === null || _eventSourceRef$curre === void 0 ? void 0 : _eventSourceRef$curre.readyState) === EventSource.CLOSED) {\n          addMessage('system', '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§¨‡§Ç‡§¶ ‡§π‡•ã ‡§ó‡§Ø‡§æ', 'error');\n          endCall();\n          return;\n        }\n        if (reconnectAttempts.current < maxReconnectAttempts && callActive) {\n          addMessage('system', `‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ, ‡§™‡•Å‡§®‡§É ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç... (‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ${reconnectAttempts.current + 1}/${maxReconnectAttempts})`, 'status');\n          reconnectAttempts.current += 1;\n          reconnectTimeoutRef.current = setTimeout(() => {\n            if (callActive || callConnecting) {\n              setupSSEConnection();\n            }\n          }, 2000 * reconnectAttempts.current); // Exponential backoff\n        } else {\n          addMessage('system', '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç‡•§', 'error');\n          endCall();\n        }\n      };\n    } catch (error) {\n      console.error('Error setting up SSE:', error);\n      setConnectionError(`SSE ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§è‡§∞‡§∞: ${error.message}`);\n      endCall();\n    }\n  };\n  const handleRealtimeUpdate = useCallback(data => {\n    if (!data || !data.type) {\n      console.warn('Invalid data received:', data);\n      return;\n    }\n    console.log('Received update:', data.type, data);\n    switch (data.type) {\n      case 'connected':\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•Å‡§à', 'status');\n        break;\n      case 'bot_question':\n      case 'bot_speaking':\n        setIsSpeaking(true);\n        setIsListening(false);\n        setIsProcessing(false);\n        setCurrentStep(data.step || '‡§¨‡•â‡§ü ‡§¨‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à');\n        addMessage('bot', data.message, 'text', {\n          step: data.step\n        });\n        // Simulate speaking duration based on message length\n        const speakingDuration = Math.max(2000, data.message.length * 80);\n        setTimeout(() => setIsSpeaking(false), speakingDuration);\n        break;\n      case 'listening_start':\n        setIsListening(true);\n        setIsSpeaking(false);\n        setIsProcessing(false);\n        setCurrentStep('‡§Ü‡§™‡§ï‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•Å‡§® ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');\n        addMessage('system', '‡§Ö‡§¨ ‡§¨‡•ã‡§≤‡•á‡§Ç...', 'status');\n        break;\n      case 'listening_end':\n        setIsListening(false);\n        setCurrentStep('‡§Ü‡§™‡§ï‡•Ä ‡§¨‡§æ‡§§ ‡§∏‡§Æ‡§ù ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');\n        setIsProcessing(true);\n        break;\n      case 'user_response':\n        setIsProcessing(false);\n        setIsListening(false);\n        addMessage('user', data.message, 'text');\n        setCurrentStep('');\n        break;\n      case 'processing':\n        setIsProcessing(true);\n        setIsListening(false);\n        setIsSpeaking(false);\n        setCurrentStep(data.message || '‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó...');\n        break;\n      case 'complaint_structured':\n        setCallStatus('processing');\n        addMessage('bot', '‡§Ü‡§™‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•ã ‡§ó‡§Ø‡§æ:', 'status');\n        if (data.data) {\n          addMessage('bot', JSON.stringify(data.data, null, 2), 'json', {\n            complaintData: data.data\n          });\n        }\n        break;\n      case 'complaint_submitted':\n        setCallStatus('completed');\n        setComplaintId(data.complaintId);\n        addMessage('bot', `‡§Ü‡§™‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§¶‡§∞‡•ç‡§ú ‡§π‡•ã ‡§ó‡§à ‡§π‡•à!`, 'status');\n        addMessage('bot', `‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§®‡§Ç‡§¨‡§∞: ${data.complaintId}`, 'text', {\n          complaintId: data.complaintId\n        });\n        setCurrentStep('‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§π‡•ã ‡§ó‡§à');\n        setIsListening(false);\n        setIsSpeaking(false);\n        setIsProcessing(false);\n        // Auto end call after 5 seconds\n        setTimeout(() => endCall(), 5000);\n        break;\n      case 'summary':\n        addMessage('bot', data.message, 'status');\n        break;\n      case 'final_message':\n        addMessage('bot', data.message, 'status');\n        break;\n      case 'error':\n        addMessage('bot', data.message, 'error');\n        setCallStatus('error');\n        setIsListening(false);\n        setIsSpeaking(false);\n        setIsProcessing(false);\n        break;\n      case 'retry':\n        addMessage('system', data.message, 'status');\n        break;\n      case 'validation_error':\n        addMessage('bot', data.message, 'error');\n        break;\n      case 'session_ended':\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§à', 'status');\n        endCall();\n        break;\n      case 'heartbeat':\n        // Keep connection alive, don't show to user\n        console.log('Heartbeat received');\n        break;\n      default:\n        console.log('Unknown message type:', data.type, data);\n        addMessage('system', `‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞: ${data.type}`, 'error');\n    }\n  }, [addMessage]);\n  const endCall = async () => {\n    try {\n      // Stop backend session\n      if (sessionId) {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), 5000);\n        await fetch('http://localhost:5000/api/stop-voice-session', {\n          method: 'POST',\n          signal: controller.signal,\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        clearTimeout(timeoutId);\n      }\n    } catch (error) {\n      console.error('Error stopping session:', error);\n      // Don't show error to user as call is ending anyway\n    }\n\n    // Cleanup local state\n    if (eventSourceRef.current) {\n      eventSourceRef.current.close();\n      eventSourceRef.current = null;\n    }\n    if (callTimerRef.current) {\n      clearInterval(callTimerRef.current);\n      callTimerRef.current = null;\n    }\n    if (reconnectTimeoutRef.current) {\n      clearTimeout(reconnectTimeoutRef.current);\n      reconnectTimeoutRef.current = null;\n    }\n    setCallActive(false);\n    setCallConnecting(false);\n    setIsListening(false);\n    setIsProcessing(false);\n    setIsSpeaking(false);\n    setCurrentStep('');\n    setSessionId(null);\n    callStartTimeRef.current = null;\n    setCallDuration(0);\n    reconnectAttempts.current = 0;\n    if (callStatus !== 'completed') {\n      setCallStatus('idle');\n      if (conversation.length > 0) {\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§à', 'status');\n      }\n    }\n  };\n  const formatMessage = msg => {\n    if (msg.type === 'json') {\n      try {\n        const data = JSON.parse(msg.message);\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-semibold text-blue-800 mb-2\",\n            children: \"\\u0936\\u093F\\u0915\\u093E\\u092F\\u0924 \\u0915\\u093E \\u0935\\u093F\\u0935\\u0930\\u0923:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 642,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-1 text-sm\",\n            children: [data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"\\u0928\\u093E\\u092E:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 20\n              }, this), \" \", data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"]]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 17\n            }, this), data[\"‡§∏‡•ç‡§•‡§æ‡§®\"] && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"\\u0938\\u094D\\u0925\\u093E\\u0928:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 648,\n                columnNumber: 20\n              }, this), \" \", data[\"‡§∏‡•ç‡§•‡§æ‡§®\"]]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 648,\n              columnNumber: 17\n            }, this), data[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"] && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"\\u0935\\u093F\\u092D\\u093E\\u0917:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 651,\n                columnNumber: 20\n              }, this), \" \", data[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"]]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 17\n            }, this), data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"\\u0936\\u093F\\u0915\\u093E\\u092F\\u0924:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 654,\n                columnNumber: 20\n              }, this), \" \", data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"]]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 654,\n              columnNumber: 17\n            }, this), data[\"‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞\"] && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: \"\\u092E\\u094B\\u092C\\u093E\\u0907\\u0932:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 657,\n                columnNumber: 20\n              }, this), \" \", data[\"‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞\"]]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 657,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 643,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 641,\n          columnNumber: 11\n        }, this);\n      } catch (e) {\n        return /*#__PURE__*/_jsxDEV(\"pre\", {\n          className: \"text-xs bg-gray-100 p-2 rounded overflow-x-auto whitespace-pre-wrap\",\n          children: msg.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 663,\n          columnNumber: 16\n        }, this);\n      }\n    }\n    return msg.message;\n  };\n  const getMessageIcon = msg => {\n    if (msg.sender === 'bot') {\n      if (msg.type === 'error') return /*#__PURE__*/_jsxDEV(AlertCircle, {\n        className: \"w-4 h-4 text-red-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 671,\n        columnNumber: 40\n      }, this);\n      if (msg.type === 'status') return /*#__PURE__*/_jsxDEV(CheckCircle, {\n        className: \"w-4 h-4 text-green-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 672,\n        columnNumber: 41\n      }, this);\n      return /*#__PURE__*/_jsxDEV(Bot, {\n        className: \"w-4 h-4 text-blue-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 673,\n        columnNumber: 14\n      }, this);\n    }\n    if (msg.sender === 'system') {\n      if (msg.type === 'error') return /*#__PURE__*/_jsxDEV(AlertCircle, {\n        className: \"w-4 h-4 text-red-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 676,\n        columnNumber: 40\n      }, this);\n      return /*#__PURE__*/_jsxDEV(Signal, {\n        className: \"w-4 h-4 text-gray-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 677,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(User, {\n      className: \"w-4 h-4 text-purple-500\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 679,\n      columnNumber: 12\n    }, this);\n  };\n  const getCallStatusColor = () => {\n    switch (callStatus) {\n      case 'connecting':\n        return 'text-yellow-600 bg-yellow-100 border-yellow-200';\n      case 'active':\n        return 'text-green-600 bg-green-100 border-green-200';\n      case 'processing':\n        return 'text-blue-600 bg-blue-100 border-blue-200';\n      case 'completed':\n        return 'text-green-600 bg-green-100 border-green-200';\n      case 'error':\n        return 'text-red-600 bg-red-100 border-red-200';\n      default:\n        return 'text-gray-600 bg-gray-100 border-gray-200';\n    }\n  };\n  const getCallStatusText = () => {\n    switch (callStatus) {\n      case 'connecting':\n        return '‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...';\n      case 'active':\n        return '‡§ï‡•â‡§≤ ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø';\n      case 'processing':\n        return '‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à';\n      case 'completed':\n        return '‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡•Ç‡§∞‡•ç‡§£';\n      case 'error':\n        return '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ';\n      default:\n        return backendConnected ? '‡§§‡•à‡§Ø‡§æ‡§∞' : '‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto mt-6 p-6 bg-white rounded-xl shadow-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(PhoneCall, {\n          className: \"w-8 h-8 text-blue-600 mr-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 709,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-3xl font-bold text-gray-900\",\n          children: \"\\u091C\\u0928\\u0924\\u093E \\u0935\\u0949\\u0907\\u0938 \\u0915\\u0949\\u0932\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 710,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 708,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600\",\n        children: \"\\u0939\\u093F\\u0902\\u0926\\u0940 \\u092E\\u0947\\u0902 \\u0905\\u092A\\u0928\\u0940 \\u0936\\u093F\\u0915\\u093E\\u092F\\u0924 \\u0915\\u0947 \\u0932\\u093F\\u090F \\u0915\\u0949\\u0932 \\u0915\\u0930\\u0947\\u0902\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 712,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex items-center justify-center mt-3 text-sm ${backendConnected ? 'text-green-600' : 'text-red-600'}`,\n        children: [backendConnected ? /*#__PURE__*/_jsxDEV(Wifi, {\n          className: \"w-4 h-4 mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 31\n        }, this) : /*#__PURE__*/_jsxDEV(WifiOff, {\n          className: \"w-4 h-4 mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 716,\n          columnNumber: 67\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: backendConnected ? '‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡•á‡§°' : '‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§°‡§ø‡§∏‡•ç‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡•á‡§°'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 715,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 707,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex items-center justify-between p-4 rounded-lg mb-6 border ${getCallStatusColor()}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center space-x-2\",\n          children: [callConnecting && /*#__PURE__*/_jsxDEV(Clock, {\n            className: \"w-5 h-5 animate-spin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 32\n          }, this), callActive && !isListening && !isSpeaking && !isProcessing && /*#__PURE__*/_jsxDEV(Signal, {\n            className: \"w-5 h-5 animate-pulse\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 727,\n            columnNumber: 15\n          }, this), isListening && /*#__PURE__*/_jsxDEV(Mic, {\n            className: \"w-5 h-5 animate-pulse text-green-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 729,\n            columnNumber: 29\n          }, this), isSpeaking && /*#__PURE__*/_jsxDEV(Volume2, {\n            className: \"w-5 h-5 animate-pulse text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 730,\n            columnNumber: 28\n          }, this), isProcessing && /*#__PURE__*/_jsxDEV(Clock, {\n            className: \"w-5 h-5 animate-spin text-yellow-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 731,\n            columnNumber: 30\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: currentStep || getCallStatusText()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 732,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 724,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 723,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-sm font-mono\",\n        children: callActive && `${formatTime(callDuration)}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 737,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 722,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center mb-6\",\n      children: !callActive && !callConnecting ? /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startCall,\n        disabled: callConnecting || !backendConnected,\n        className: `flex items-center space-x-3 px-8 py-4 rounded-full font-medium text-lg shadow-lg transform hover:scale-105 transition-all ${!backendConnected ? 'bg-gray-400 text-white cursor-not-allowed' : 'bg-green-600 text-white hover:bg-green-700'}`,\n        children: [/*#__PURE__*/_jsxDEV(Phone, {\n          className: \"w-6 h-6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 754,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: !backendConnected ? '‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à' : '‡§ï‡•â‡§≤ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 755,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 745,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: endCall,\n        className: \"flex items-center space-x-3 bg-red-600 text-white px-8 py-4 rounded-full hover:bg-red-700 transition-colors font-medium text-lg shadow-lg transform hover:scale-105\",\n        children: [/*#__PURE__*/_jsxDEV(PhoneOff, {\n          className: \"w-6 h-6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 762,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\u0915\\u0949\\u0932 \\u0938\\u092E\\u093E\\u092A\\u094D\\u0924 \\u0915\\u0930\\u0947\\u0902\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 763,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 758,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 743,\n      columnNumber: 7\n    }, this), connectionError && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"w-5 h-5 flex-shrink-0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 772,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: \"\\u0915\\u0928\\u0947\\u0915\\u094D\\u0936\\u0928 \\u090F\\u0930\\u0930:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 774,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm mt-1\",\n            children: connectionError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 775,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 773,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 771,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 770,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: conversationRef,\n      className: \"bg-gray-900 text-white rounded-lg p-4 h-96 overflow-y-auto border border-gray-700\",\n      style: {\n        background: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)',\n        fontFamily: 'monospace'\n      },\n      children: conversation.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center h-full text-gray-400\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(PhoneCall, {\n            className: \"w-12 h-12 mx-auto mb-3 text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 793,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\u0915\\u0949\\u0932 \\u0932\\u0949\\u0917 \\u092F\\u0939\\u093E\\u0901 \\u0926\\u093F\\u0916\\u093E\\u0908 \\u091C\\u093E\\u090F\\u0917\\u093E...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 794,\n            columnNumber: 15\n          }, this), !backendConnected && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm mt-2 text-red-400\",\n            children: \"\\u092C\\u0948\\u0915\\u090F\\u0902\\u0921 \\u0938\\u0930\\u094D\\u0935\\u0930 \\u0938\\u0947 \\u0915\\u0928\\u0947\\u0915\\u094D\\u0936\\u0928 \\u0915\\u0940 \\u0906\\u0935\\u0936\\u094D\\u092F\\u0915\\u0924\\u093E \\u0939\\u0948\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 796,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 792,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 791,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: conversation.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-start space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-shrink-0 text-xs text-gray-400 w-16\",\n            children: msg.timestamp.toLocaleTimeString('hi-IN', {\n              hour12: false,\n              hour: '2-digit',\n              minute: '2-digit',\n              second: '2-digit'\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 807,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `flex-shrink-0 p-1 rounded-full ${msg.sender === 'user' ? 'bg-purple-600' : msg.sender === 'system' ? msg.type === 'error' ? 'bg-red-600' : 'bg-gray-600' : msg.type === 'error' ? 'bg-red-600' : msg.type === 'status' ? 'bg-green-600' : 'bg-blue-600'}`,\n            children: getMessageIcon(msg)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 815,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 min-w-0\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `text-sm ${msg.sender === 'user' ? 'text-purple-300' : msg.sender === 'system' ? msg.type === 'error' ? 'text-red-300' : 'text-gray-300' : msg.type === 'error' ? 'text-red-300' : msg.type === 'status' ? 'text-green-300' : 'text-blue-300'}`,\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium\",\n                children: [msg.sender === 'user' ? '‡§Ü‡§™' : msg.sender === 'system' ? '‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ' : '‡§¨‡•â‡§ü', \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 836,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 825,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-white text-sm mt-1 break-words\",\n              children: formatMessage(msg)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 841,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 824,\n            columnNumber: 17\n          }, this)]\n        }, msg.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 803,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 801,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 782,\n      columnNumber: 7\n    }, this), callActive && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex items-center justify-center space-x-4 text-sm\",\n      children: [isListening && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2 bg-green-100 px-4 py-2 rounded-full border border-green-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-2 h-2 bg-green-500 rounded-full animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 856,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Mic, {\n          className: \"w-4 h-4 text-green-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 857,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-green-700 font-medium\",\n          children: \"\\u0938\\u0941\\u0928 \\u0930\\u0939\\u0947 \\u0939\\u0948\\u0902...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 858,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 855,\n        columnNumber: 13\n      }, this), isSpeaking && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2 bg-blue-100 px-4 py-2 rounded-full border border-blue-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 863,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Volume2, {\n          className: \"w-4 h-4 text-blue-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 864,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-blue-700 font-medium\",\n          children: \"\\u092C\\u0949\\u091F \\u092C\\u094B\\u0932 \\u0930\\u0939\\u093E \\u0939\\u0948...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 865,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 862,\n        columnNumber: 13\n      }, this), isProcessing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2 bg-yellow-100 px-4 py-2 rounded-full border border-yellow-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-2 h-2 bg-yellow-500 rounded-full animate-pulse\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 870,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Clock, {\n          className: \"w-4 h-4 text-yellow-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 871,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-yellow-700 font-medium\",\n          children: \"\\u092A\\u094D\\u0930\\u094B\\u0938\\u0947\\u0938\\u093F\\u0902\\u0917...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 872,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 869,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 853,\n      columnNumber: 9\n    }, this), complaintId && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"font-semibold text-green-800 flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(CheckCircle, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 884,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u0936\\u093F\\u0915\\u093E\\u092F\\u0924 \\u0938\\u092B\\u0932\\u0924\\u093E\\u092A\\u0942\\u0930\\u094D\\u0935\\u0915 \\u0926\\u0930\\u094D\\u091C!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 885,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 883,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-green-700 mt-1\",\n            children: [\"\\u0906\\u092A\\u0915\\u093E \\u0936\\u093F\\u0915\\u093E\\u092F\\u0924 \\u0928\\u0902\\u092C\\u0930: \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"font-mono font-bold text-lg\",\n              children: complaintId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 888,\n              columnNumber: 35\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 887,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-green-600 text-sm mt-1\",\n            children: \"\\u0915\\u0943\\u092A\\u092F\\u093E \\u0907\\u0938 \\u0928\\u0902\\u092C\\u0930 \\u0915\\u094B \\u0905\\u092A\\u0928\\u0947 \\u092A\\u093E\\u0938 \\u0938\\u0941\\u0930\\u0915\\u094D\\u0937\\u093F\\u0924 \\u0930\\u0916\\u0947\\u0902\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 890,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 882,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 881,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 880,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 flex justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setAudioEnabled(!audioEnabled),\n        className: `flex items-center space-x-2 px-4 py-2 rounded-lg text-sm ${audioEnabled ? 'bg-green-100 text-green-700 hover:bg-green-200' : 'bg-red-100 text-red-700 hover:bg-red-200'} transition-colors`,\n        children: [audioEnabled ? /*#__PURE__*/_jsxDEV(Volume2, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 908,\n          columnNumber: 27\n        }, this) : /*#__PURE__*/_jsxDEV(VolumeX, {\n          className: \"w-4 h-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 908,\n          columnNumber: 61\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: audioEnabled ? '‡§Ü‡§µ‡§æ‡§ú‡§º ‡§ö‡§æ‡§≤‡•Ç' : '‡§Ü‡§µ‡§æ‡§ú‡§º ‡§¨‡§Ç‡§¶'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 909,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 900,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 899,\n      columnNumber: 7\n    }, this), typeof window !== 'undefined' && window.location.hostname === 'localhost' && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-6 p-3 bg-gray-100 rounded-lg text-xs\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"font-semibold mb-2\",\n        children: \"Debug Info:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 916,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Backend Connected: \", backendConnected ? '‚úÖ' : '‚ùå']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 918,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Call Status: \", callStatus]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 919,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Session ID: \", sessionId || 'None']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 920,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Reconnect Attempts: \", reconnectAttempts.current, \"/\", maxReconnectAttempts]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 921,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Is Listening: \", isListening ? '‚úÖ' : '‚ùå']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 922,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Is Speaking: \", isSpeaking ? '‚úÖ' : '‚ùå']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 923,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Is Processing: \", isProcessing ? '‚úÖ' : '‚ùå']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 924,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Messages Count: \", conversation.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 925,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 917,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 915,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 705,\n    columnNumber: 5\n  }, this);\n}\n_s(VoiceComplaint, \"/nS8oE9t/liJHpy9pzFfoRRBh9k=\");\n_c = VoiceComplaint;\nvar _c;\n$RefreshReg$(_c, \"VoiceComplaint\");","map":{"version":3,"names":["Phone","PhoneOff","Mic","MicOff","Volume2","VolumeX","User","Bot","CheckCircle","AlertCircle","Clock","Signal","PhoneCall","Wifi","WifiOff","jsxDEV","_jsxDEV","VoiceComplaint","_s","conversation","setConversation","useState","isListening","setIsListening","isProcessing","setIsProcessing","isSpeaking","setIsSpeaking","callActive","setCallActive","callConnecting","setCallConnecting","complaintId","setComplaintId","callStatus","setCallStatus","audioEnabled","setAudioEnabled","currentStep","setCurrentStep","sessionId","setSessionId","connectionError","setConnectionError","callDuration","setCallDuration","backendConnected","setBackendConnected","conversationRef","useRef","eventSourceRef","callStartTimeRef","callTimerRef","reconnectTimeoutRef","maxReconnectAttempts","reconnectAttempts","connectionCheckRef","useEffect","checkBackendConnection","current","setInterval","clearInterval","controller","AbortController","timeoutId","setTimeout","abort","response","fetch","method","signal","headers","clearTimeout","ok","includes","Error","status","error","console","log","message","name","scrollTop","scrollHeight","elapsed","Math","floor","Date","now","endCall","formatTime","seconds","mins","secs","toString","padStart","addMessage","useCallback","sender","type","metadata","newMessage","id","random","timestamp","prev","startCall","data","json","success","session_id","Promise","resolve","setupSSEConnection","errorMessage","close","EventSource","onopen","onmessage","event","JSON","parse","handleRealtimeUpdate","onerror","_eventSourceRef$curre","readyState","CLOSED","warn","step","speakingDuration","max","length","stringify","complaintData","formatMessage","msg","className","children","fileName","_jsxFileName","lineNumber","columnNumber","e","getMessageIcon","getCallStatusColor","getCallStatusText","onClick","disabled","ref","style","background","fontFamily","map","toLocaleTimeString","hour12","hour","minute","second","window","location","hostname","_c","$RefreshReg$"],"sources":["D:/Kunal Files/projects/janta_voice_final/frontend/src/pages/VoiceComplaint.jsx"],"sourcesContent":["// // import React, { useState } from \"react\";\r\n// // import axios from \"axios\";\r\n\r\n// // export default function VoiceComplaint() {\r\n// //   const [logs, setLogs] = useState([]);\r\n// //   const [loading, setLoading] = useState(false);\r\n// //   const [complaintId, setComplaintId] = useState(null);\r\n// //   const [submitted, setSubmitted] = useState(false);\r\n\r\n// //   const appendLog = (line) => {\r\n// //     setLogs((prev) => [...prev, line]);\r\n// //   };\r\n\r\n// //   const handleVoiceComplaint = async () => {\r\n// //     setLoading(true);\r\n// //     setLogs([\"üéôÔ∏è Voice complaint started...\"]);\r\n// //     setSubmitted(false);\r\n// //     setComplaintId(null);\r\n\r\n// //     try {\r\n// //       // 1. Trigger the Python voice bot and get structured data\r\n// //       const voiceRes = await axios.get(\"http://localhost:5000/api/\");\r\n// //       if (voiceRes.data.status !== \"success\") {\r\n// //         appendLog(\"‚ùå Voice bot error: \" + voiceRes.data.message);\r\n// //         return;\r\n// //       }\r\n\r\n// //       const complaintData = voiceRes.data.data;\r\n// //       appendLog(\"‚úÖ Voice bot finished. Data:\");\r\n// //       appendLog(JSON.stringify(complaintData, null, 2));\r\n\r\n// //       // 2. Send that same data to the complaints endpoint\r\n// //       const formRes = await axios.post(\r\n// //         \"http://localhost:5000/api/complaint\",\r\n// //         {\r\n// //           name: complaintData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] || complaintData.name,\r\n// //           complaint: complaintData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] || complaintData.complaint,\r\n// //           location: complaintData[\"‡§∏‡•ç‡§•‡§æ‡§®\"] || complaintData.location,\r\n// //           // map any other fields if needed\r\n// //         }\r\n// //       );\r\n\r\n// //       // 3. Capture and display the Complaint ID\r\n// //       const newId = formRes.data.complaintId || formRes.data.complaintId;\r\n// //       setComplaintId(newId);\r\n// //       setSubmitted(true);\r\n// //       appendLog(`üì¨ Complaint submitted. ID: ${newId}`);\r\n// //     } catch (err) {\r\n// //       appendLog(\"‚ùå Error: \" + err.message);\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   return (\r\n// //     <div className=\"max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow\">\r\n// //       <h2 className=\"text-2xl font-semibold mb-4\">Voice Complaint</h2>\r\n// //       <button\r\n// //         onClick={handleVoiceComplaint}\r\n// //         disabled={loading}\r\n// //         className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50\"\r\n// //       >\r\n// //         {loading ? \"Processing...\" : \"Start Voice Complaint\"}\r\n// //       </button>\r\n\r\n// //       <div className=\"mt-6 bg-gray-900 text-green-200 p-4 rounded font-mono h-48 overflow-y-scroll\">\r\n// //         {logs.map((line, i) => (\r\n// //           <div key={i}>{line}</div>\r\n// //         ))}\r\n// //       </div>\r\n\r\n// //       {submitted && (\r\n// //         <div className=\"mt-6 text-green-700 font-semibold\">\r\n// //           Complaint submitted successfully!<br />\r\n// //           Your Complaint ID: <span className=\"font-bold\">{complaintId}</span>\r\n// //         </div>\r\n// //       )}\r\n// //     </div>\r\n// //   );\r\n// // }\r\n\r\n\r\n\r\n// import React, { useState } from \"react\";\r\n// import axios from \"axios\";\r\n\r\n// export default function VoiceComplaint() {\r\n//   // 1. State mirrors ComplaintForm\r\n//   const [formData, setFormData] = useState({\r\n//     name: \"\",\r\n//     complaint: \"\",\r\n//     location: \"\",\r\n//     urgency: \"normal\",\r\n//   });\r\n\r\n//   const [complaintId, setComplaintId] = useState(null);\r\n//   const [submitted, setSubmitted] = useState(false);\r\n//   const [logs, setLogs] = useState([]);\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   // helper to append to console‚Äëstyle logs\r\n//   const appendLog = (line) => setLogs((prev) => [...prev, line]);\r\n\r\n//   const handleVoiceComplaint = async () => {\r\n//     setLoading(true);\r\n//     setLogs([\"üéôÔ∏è Starting voice complaint...\"]);\r\n//     setSubmitted(false);\r\n//     setComplaintId(null);\r\n\r\n//     try {\r\n//       // 2. Trigger your backend voice route\r\n//       const voiceRes = await axios.get(\"http://localhost:5000/api/voice-complaint\");\r\n//       if (voiceRes.data.status !== \"success\") {\r\n//         appendLog(\"Thank You!\");\r\n//         return;\r\n//       }\r\n\r\n//       // 3. Pull out structured data\r\n//       const data = voiceRes.data.data;\r\n//       appendLog(\"‚úÖ Voice data received:\");\r\n//       appendLog(JSON.stringify(data, null, 2));\r\n\r\n\r\n//       // // 4. Map it into the exact same formData shape\r\n//       // const mapped = {\r\n//       //   name: data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] || \"\",\r\n//       //   location: data[\"‡§∏‡•ç‡§•‡§æ‡§®\"] || \"\",\r\n//       //   department: data[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"] || \"\",\r\n//       //   description: data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] || \"\",\r\n//       //   urgency: \"normal\",\r\n//       // };\r\n\r\n//       const aiData = voiceRes.data.data;\r\n\r\n//       const payload = {\r\n//         name: aiData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] || \"\",\r\n//         location: aiData[\"‡§∏‡•ç‡§•‡§æ‡§®\"] || \"\",\r\n//         department: aiData[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"] || \"\",\r\n//         description: aiData[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] || \"\",\r\n//       };\r\n\r\n//       await axios.post(\"http://localhost:5000/api/complaint\", payload);\r\n\r\n\r\n//       setFormData(mapped);\r\n\r\n//       // 5. POST to the same endpoint as ComplaintForm\r\n//       const res = await axios.post(\"http://localhost:5000/api/complaint\", mapped);\r\n//       setComplaintId(res.data.complaintId);\r\n//       setSubmitted(true);\r\n//       appendLog(`üì¨ Complaint submitted. ID: ${res.data.complaintId}`);\r\n//     } catch (err) {\r\n//       appendLog(\"‚ùå Submission error: \" + err.message);\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"max-w-xl mx-auto mt-10 p-6 bg-white rounded shadow\">\r\n//       <h2 className=\"text-2xl font-semibold mb-4\">Voice Complaint</h2>\r\n\r\n//       {/* Start button */}\r\n//       <button\r\n//         onClick={handleVoiceComplaint}\r\n//         disabled={loading}\r\n//         className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50\"\r\n//       >\r\n//         {loading ? \"Processing...\" : \"Start Voice Complaint\"}\r\n//       </button>\r\n\r\n//       {/* Console logs */}\r\n//       <div className=\"mt-4 bg-gray-900 text-green-200 p-4 rounded font-mono h-48 overflow-y-scroll\">\r\n//         {logs.length === 0 ? <div>Logs will appear here...</div> : logs.map((l, i) => <div key={i}>{l}</div>)}\r\n//       </div>\r\n\r\n//       {/* Confirmation */}\r\n//       {submitted && (\r\n//         <div className=\"mt-6 text-green-700 font-semibold\">\r\n//           Complaint submitted successfully!<br />\r\n//           Your Complaint ID: <span className=\"font-bold\">{complaintId}</span>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport { \r\n  Phone, \r\n  PhoneOff, \r\n  Mic, \r\n  MicOff, \r\n  Volume2, \r\n  VolumeX, \r\n  User, \r\n  Bot, \r\n  CheckCircle, \r\n  AlertCircle, \r\n  Clock,\r\n  Signal,\r\n  PhoneCall,\r\n  Wifi,\r\n  WifiOff\r\n} from \"lucide-react\";\r\n\r\nexport default function VoiceComplaint() {\r\n  const [conversation, setConversation] = useState([]);\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [isSpeaking, setIsSpeaking] = useState(false);\r\n  const [callActive, setCallActive] = useState(false);\r\n  const [callConnecting, setCallConnecting] = useState(false);\r\n  const [complaintId, setComplaintId] = useState(null);\r\n  const [callStatus, setCallStatus] = useState('idle'); // idle, connecting, active, completed, error\r\n  const [audioEnabled, setAudioEnabled] = useState(true);\r\n  const [currentStep, setCurrentStep] = useState('');\r\n  const [sessionId, setSessionId] = useState(null);\r\n  const [connectionError, setConnectionError] = useState(null);\r\n  const [callDuration, setCallDuration] = useState(0);\r\n  const [backendConnected, setBackendConnected] = useState(false);\r\n  \r\n  const conversationRef = useRef(null);\r\n  const eventSourceRef = useRef(null);\r\n  const callStartTimeRef = useRef(null);\r\n  const callTimerRef = useRef(null);\r\n  const reconnectTimeoutRef = useRef(null);\r\n  const maxReconnectAttempts = 3;\r\n  const reconnectAttempts = useRef(0);\r\n  const connectionCheckRef = useRef(null);\r\n\r\n  // Check backend connection on component mount\r\n  useEffect(() => {\r\n    checkBackendConnection();\r\n    // Check connection every 30 seconds\r\n    connectionCheckRef.current = setInterval(checkBackendConnection, 30000);\r\n    \r\n    return () => {\r\n      if (connectionCheckRef.current) {\r\n        clearInterval(connectionCheckRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const checkBackendConnection = async () => {\r\n    try {\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 second timeout\r\n      \r\n      const response = await fetch('http://localhost:5000/api/health', {\r\n        method: 'GET',\r\n        signal: controller.signal,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        }\r\n      });\r\n      \r\n      clearTimeout(timeoutId);\r\n      \r\n      if (response.ok) {\r\n        setBackendConnected(true);\r\n        if (connectionError?.includes('backend')) {\r\n          setConnectionError(null);\r\n        }\r\n      } else {\r\n        throw new Error(`Backend responded with status: ${response.status}`);\r\n      }\r\n    } catch (error) {\r\n      console.log('Backend connection check failed:', error.message);\r\n      setBackendConnected(false);\r\n      if (error.name === 'AbortError') {\r\n        setConnectionError('Backend connection timeout - ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§¶‡•á‡§∞‡•Ä');\r\n      } else {\r\n        setConnectionError('Backend server not available - ‡§¨‡•à‡§ï‡§è‡§Ç‡§° ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à');\r\n      }\r\n    }\r\n  };\r\n\r\n  // Auto-scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    if (conversationRef.current) {\r\n      conversationRef.current.scrollTop = conversationRef.current.scrollHeight;\r\n    }\r\n  }, [conversation]);\r\n\r\n  // Call duration timer\r\n  useEffect(() => {\r\n    if (callActive && callStartTimeRef.current) {\r\n      callTimerRef.current = setInterval(() => {\r\n        const elapsed = Math.floor((Date.now() - callStartTimeRef.current) / 1000);\r\n        setCallDuration(elapsed);\r\n      }, 1000);\r\n    } else {\r\n      if (callTimerRef.current) {\r\n        clearInterval(callTimerRef.current);\r\n        callTimerRef.current = null;\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (callTimerRef.current) {\r\n        clearInterval(callTimerRef.current);\r\n      }\r\n    };\r\n  }, [callActive]);\r\n\r\n  // Cleanup on component unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      endCall();\r\n      if (reconnectTimeoutRef.current) {\r\n        clearTimeout(reconnectTimeoutRef.current);\r\n      }\r\n      if (connectionCheckRef.current) {\r\n        clearInterval(connectionCheckRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const addMessage = useCallback((sender, message, type = 'text', metadata = {}) => {\r\n    const newMessage = {\r\n      id: Date.now() + Math.random(),\r\n      sender, // 'bot' or 'user'\r\n      message,\r\n      type, // 'text', 'status', 'json', 'error', 'system'\r\n      timestamp: new Date(),\r\n      metadata\r\n    };\r\n    setConversation(prev => [...prev, newMessage]);\r\n  }, []);\r\n\r\n  const startCall = async () => {\r\n    if (!backendConnected) {\r\n      addMessage('system', '‡§¨‡•à‡§ï‡§è‡§Ç‡§° ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§', 'error');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setCallConnecting(true);\r\n      setCallStatus('connecting');\r\n      setConversation([]);\r\n      setConnectionError(null);\r\n      reconnectAttempts.current = 0;\r\n      \r\n      addMessage('system', '‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...', 'status');\r\n      \r\n      // Start voice session with timeout\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout\r\n      \r\n      const response = await fetch('http://localhost:5000/api/start-voice-session', { \r\n        method: 'POST',\r\n        signal: controller.signal,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        }\r\n      });\r\n\r\n      clearTimeout(timeoutId);\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      \r\n      if (!data.success) {\r\n        throw new Error(data.error || 'Failed to start session');\r\n      }\r\n\r\n      setSessionId(data.session_id);\r\n      \r\n      // Wait a moment for session to initialize\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n      \r\n      // Start SSE connection\r\n      await setupSSEConnection();\r\n      \r\n    } catch (error) {\r\n      console.error('Error starting call:', error);\r\n      let errorMessage = '‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ';\r\n      \r\n      if (error.name === 'AbortError') {\r\n        errorMessage = '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ü‡§æ‡§á‡§Æ‡§Ü‡§â‡§ü - ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç';\r\n      } else if (error.message.includes('Failed to fetch')) {\r\n        errorMessage = '‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§∏‡§ï‡§æ';\r\n      } else {\r\n        errorMessage = `‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ: ${error.message}`;\r\n      }\r\n      \r\n      setConnectionError(errorMessage);\r\n      addMessage('system', errorMessage, 'error');\r\n      setCallConnecting(false);\r\n      setCallStatus('error');\r\n    }\r\n  };\r\n\r\n  const setupSSEConnection = async () => {\r\n    try {\r\n      // Close existing connection\r\n      if (eventSourceRef.current) {\r\n        eventSourceRef.current.close();\r\n      }\r\n\r\n      // Create EventSource without credentials to avoid CORS issues\r\n      eventSourceRef.current = new EventSource('http://localhost:5000/api/voice-complaint-stream');\r\n      \r\n      eventSourceRef.current.onopen = () => {\r\n        console.log('SSE connection opened');\r\n        setCallConnecting(false);\r\n        setCallActive(true);\r\n        setCallStatus('active');\r\n        callStartTimeRef.current = Date.now();\r\n        setCallDuration(0);\r\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§ó‡§à ‡§π‡•à', 'status');\r\n        reconnectAttempts.current = 0;\r\n        setConnectionError(null);\r\n      };\r\n\r\n      eventSourceRef.current.onmessage = (event) => {\r\n        try {\r\n          const data = JSON.parse(event.data);\r\n          handleRealtimeUpdate(data);\r\n        } catch (error) {\r\n          console.error('Error parsing SSE data:', error);\r\n          addMessage('system', '‡§°‡•á‡§ü‡§æ ‡§™‡§æ‡§∞‡•ç‡§∏‡§ø‡§Ç‡§ó ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ', 'error');\r\n        }\r\n      };\r\n\r\n      eventSourceRef.current.onerror = (error) => {\r\n        console.error('SSE Error:', error);\r\n        \r\n        if (eventSourceRef.current?.readyState === EventSource.CLOSED) {\r\n          addMessage('system', '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§¨‡§Ç‡§¶ ‡§π‡•ã ‡§ó‡§Ø‡§æ', 'error');\r\n          endCall();\r\n          return;\r\n        }\r\n        \r\n        if (reconnectAttempts.current < maxReconnectAttempts && callActive) {\r\n          addMessage('system', `‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ, ‡§™‡•Å‡§®‡§É ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç... (‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ${reconnectAttempts.current + 1}/${maxReconnectAttempts})`, 'status');\r\n          reconnectAttempts.current += 1;\r\n          \r\n          reconnectTimeoutRef.current = setTimeout(() => {\r\n            if (callActive || callConnecting) {\r\n              setupSSEConnection();\r\n            }\r\n          }, 2000 * reconnectAttempts.current); // Exponential backoff\r\n        } else {\r\n          addMessage('system', '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¶‡•ã‡§¨‡§æ‡§∞‡§æ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç‡•§', 'error');\r\n          endCall();\r\n        }\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('Error setting up SSE:', error);\r\n      setConnectionError(`SSE ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§è‡§∞‡§∞: ${error.message}`);\r\n      endCall();\r\n    }\r\n  };\r\n\r\n  const handleRealtimeUpdate = useCallback((data) => {\r\n    if (!data || !data.type) {\r\n      console.warn('Invalid data received:', data);\r\n      return;\r\n    }\r\n\r\n    console.log('Received update:', data.type, data);\r\n\r\n    switch (data.type) {\r\n      case 'connected':\r\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•Å‡§à', 'status');\r\n        break;\r\n\r\n      case 'bot_question':\r\n      case 'bot_speaking':\r\n        setIsSpeaking(true);\r\n        setIsListening(false);\r\n        setIsProcessing(false);\r\n        setCurrentStep(data.step || '‡§¨‡•â‡§ü ‡§¨‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à');\r\n        addMessage('bot', data.message, 'text', { step: data.step });\r\n        // Simulate speaking duration based on message length\r\n        const speakingDuration = Math.max(2000, data.message.length * 80);\r\n        setTimeout(() => setIsSpeaking(false), speakingDuration);\r\n        break;\r\n        \r\n      case 'listening_start':\r\n        setIsListening(true);\r\n        setIsSpeaking(false);\r\n        setIsProcessing(false);\r\n        setCurrentStep('‡§Ü‡§™‡§ï‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•Å‡§® ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');\r\n        addMessage('system', '‡§Ö‡§¨ ‡§¨‡•ã‡§≤‡•á‡§Ç...', 'status');\r\n        break;\r\n        \r\n      case 'listening_end':\r\n        setIsListening(false);\r\n        setCurrentStep('‡§Ü‡§™‡§ï‡•Ä ‡§¨‡§æ‡§§ ‡§∏‡§Æ‡§ù ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...');\r\n        setIsProcessing(true);\r\n        break;\r\n        \r\n      case 'user_response':\r\n        setIsProcessing(false);\r\n        setIsListening(false);\r\n        addMessage('user', data.message, 'text');\r\n        setCurrentStep('');\r\n        break;\r\n        \r\n      case 'processing':\r\n        setIsProcessing(true);\r\n        setIsListening(false);\r\n        setIsSpeaking(false);\r\n        setCurrentStep(data.message || '‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó...');\r\n        break;\r\n        \r\n      case 'complaint_structured':\r\n        setCallStatus('processing');\r\n        addMessage('bot', '‡§Ü‡§™‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•ã ‡§ó‡§Ø‡§æ:', 'status');\r\n        if (data.data) {\r\n          addMessage('bot', JSON.stringify(data.data, null, 2), 'json', { complaintData: data.data });\r\n        }\r\n        break;\r\n        \r\n      case 'complaint_submitted':\r\n        setCallStatus('completed');\r\n        setComplaintId(data.complaintId);\r\n        addMessage('bot', `‡§Ü‡§™‡§ï‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§¶‡§∞‡•ç‡§ú ‡§π‡•ã ‡§ó‡§à ‡§π‡•à!`, 'status');\r\n        addMessage('bot', `‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§®‡§Ç‡§¨‡§∞: ${data.complaintId}`, 'text', { complaintId: data.complaintId });\r\n        setCurrentStep('‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§¶‡§∞‡•ç‡§ú ‡§π‡•ã ‡§ó‡§à');\r\n        setIsListening(false);\r\n        setIsSpeaking(false);\r\n        setIsProcessing(false);\r\n        // Auto end call after 5 seconds\r\n        setTimeout(() => endCall(), 5000);\r\n        break;\r\n        \r\n      case 'summary':\r\n        addMessage('bot', data.message, 'status');\r\n        break;\r\n        \r\n      case 'final_message':\r\n        addMessage('bot', data.message, 'status');\r\n        break;\r\n        \r\n      case 'error':\r\n        addMessage('bot', data.message, 'error');\r\n        setCallStatus('error');\r\n        setIsListening(false);\r\n        setIsSpeaking(false);\r\n        setIsProcessing(false);\r\n        break;\r\n\r\n      case 'retry':\r\n        addMessage('system', data.message, 'status');\r\n        break;\r\n\r\n      case 'validation_error':\r\n        addMessage('bot', data.message, 'error');\r\n        break;\r\n\r\n      case 'session_ended':\r\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§à', 'status');\r\n        endCall();\r\n        break;\r\n\r\n      case 'heartbeat':\r\n        // Keep connection alive, don't show to user\r\n        console.log('Heartbeat received');\r\n        break;\r\n        \r\n      default:\r\n        console.log('Unknown message type:', data.type, data);\r\n        addMessage('system', `‡§Ö‡§ú‡•ç‡§û‡§æ‡§§ ‡§∏‡§Ç‡§¶‡•á‡§∂ ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞: ${data.type}`, 'error');\r\n    }\r\n  }, [addMessage]);\r\n\r\n  const endCall = async () => {\r\n    try {\r\n      // Stop backend session\r\n      if (sessionId) {\r\n        const controller = new AbortController();\r\n        const timeoutId = setTimeout(() => controller.abort(), 5000);\r\n        \r\n        await fetch('http://localhost:5000/api/stop-voice-session', { \r\n          method: 'POST',\r\n          signal: controller.signal,\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          }\r\n        });\r\n        \r\n        clearTimeout(timeoutId);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error stopping session:', error);\r\n      // Don't show error to user as call is ending anyway\r\n    }\r\n\r\n    // Cleanup local state\r\n    if (eventSourceRef.current) {\r\n      eventSourceRef.current.close();\r\n      eventSourceRef.current = null;\r\n    }\r\n\r\n    if (callTimerRef.current) {\r\n      clearInterval(callTimerRef.current);\r\n      callTimerRef.current = null;\r\n    }\r\n\r\n    if (reconnectTimeoutRef.current) {\r\n      clearTimeout(reconnectTimeoutRef.current);\r\n      reconnectTimeoutRef.current = null;\r\n    }\r\n\r\n    setCallActive(false);\r\n    setCallConnecting(false);\r\n    setIsListening(false);\r\n    setIsProcessing(false);\r\n    setIsSpeaking(false);\r\n    setCurrentStep('');\r\n    setSessionId(null);\r\n    callStartTimeRef.current = null;\r\n    setCallDuration(0);\r\n    reconnectAttempts.current = 0;\r\n    \r\n    if (callStatus !== 'completed') {\r\n      setCallStatus('idle');\r\n      if (conversation.length > 0) {\r\n        addMessage('system', '‡§ï‡•â‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•ã ‡§ó‡§à', 'status');\r\n      }\r\n    }\r\n  };\r\n\r\n  const formatMessage = (msg) => {\r\n    if (msg.type === 'json') {\r\n      try {\r\n        const data = JSON.parse(msg.message);\r\n        return (\r\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-3 mt-2\">\r\n            <h4 className=\"font-semibold text-blue-800 mb-2\">‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£:</h4>\r\n            <div className=\"space-y-1 text-sm\">\r\n              {data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"] && (\r\n                <p><span className=\"font-medium\">‡§®‡§æ‡§Æ:</span> {data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡§ï‡§∞‡•ç‡§§‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ\"]}</p>\r\n              )}\r\n              {data[\"‡§∏‡•ç‡§•‡§æ‡§®\"] && (\r\n                <p><span className=\"font-medium\">‡§∏‡•ç‡§•‡§æ‡§®:</span> {data[\"‡§∏‡•ç‡§•‡§æ‡§®\"]}</p>\r\n              )}\r\n              {data[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"] && (\r\n                <p><span className=\"font-medium\">‡§µ‡§ø‡§≠‡§æ‡§ó:</span> {data[\"‡§µ‡§ø‡§≠‡§æ‡§ó\"]}</p>\r\n              )}\r\n              {data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"] && (\r\n                <p><span className=\"font-medium\">‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§:</span> {data[\"‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§\"]}</p>\r\n              )}\r\n              {data[\"‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞\"] && (\r\n                <p><span className=\"font-medium\">‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤:</span> {data[\"‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞\"]}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        );\r\n      } catch (e) {\r\n        return <pre className=\"text-xs bg-gray-100 p-2 rounded overflow-x-auto whitespace-pre-wrap\">{msg.message}</pre>;\r\n      }\r\n    }\r\n    return msg.message;\r\n  };\r\n\r\n  const getMessageIcon = (msg) => {\r\n    if (msg.sender === 'bot') {\r\n      if (msg.type === 'error') return <AlertCircle className=\"w-4 h-4 text-red-500\" />;\r\n      if (msg.type === 'status') return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\r\n      return <Bot className=\"w-4 h-4 text-blue-500\" />;\r\n    }\r\n    if (msg.sender === 'system') {\r\n      if (msg.type === 'error') return <AlertCircle className=\"w-4 h-4 text-red-500\" />;\r\n      return <Signal className=\"w-4 h-4 text-gray-500\" />;\r\n    }\r\n    return <User className=\"w-4 h-4 text-purple-500\" />;\r\n  };\r\n\r\n  const getCallStatusColor = () => {\r\n    switch (callStatus) {\r\n      case 'connecting': return 'text-yellow-600 bg-yellow-100 border-yellow-200';\r\n      case 'active': return 'text-green-600 bg-green-100 border-green-200';\r\n      case 'processing': return 'text-blue-600 bg-blue-100 border-blue-200';\r\n      case 'completed': return 'text-green-600 bg-green-100 border-green-200';\r\n      case 'error': return 'text-red-600 bg-red-100 border-red-200';\r\n      default: return 'text-gray-600 bg-gray-100 border-gray-200';\r\n    }\r\n  };\r\n\r\n  const getCallStatusText = () => {\r\n    switch (callStatus) {\r\n      case 'connecting': return '‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à...';\r\n      case 'active': return '‡§ï‡•â‡§≤ ‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø';\r\n      case 'processing': return '‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à';\r\n      case 'completed': return '‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§™‡•Ç‡§∞‡•ç‡§£';\r\n      case 'error': return '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§Æ‡•á‡§Ç ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ';\r\n      default: return backendConnected ? '‡§§‡•à‡§Ø‡§æ‡§∞' : '‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto mt-6 p-6 bg-white rounded-xl shadow-lg\">\r\n      {/* Header */}\r\n      <div className=\"text-center mb-6\">\r\n        <div className=\"flex items-center justify-center mb-4\">\r\n          <PhoneCall className=\"w-8 h-8 text-blue-600 mr-3\" />\r\n          <h2 className=\"text-3xl font-bold text-gray-900\">‡§ú‡§®‡§§‡§æ ‡§µ‡•â‡§á‡§∏ ‡§ï‡•â‡§≤</h2>\r\n        </div>\r\n        <p className=\"text-gray-600\">‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Æ‡•á‡§Ç ‡§Ö‡§™‡§®‡•Ä ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç</p>\r\n        \r\n        {/* Backend Connection Status */}\r\n        <div className={`flex items-center justify-center mt-3 text-sm ${backendConnected ? 'text-green-600' : 'text-red-600'}`}>\r\n          {backendConnected ? <Wifi className=\"w-4 h-4 mr-1\" /> : <WifiOff className=\"w-4 h-4 mr-1\" />}\r\n          <span>{backendConnected ? '‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡•á‡§°' : '‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§°‡§ø‡§∏‡•ç‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡•á‡§°'}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Call Status Bar */}\r\n      <div className={`flex items-center justify-between p-4 rounded-lg mb-6 border ${getCallStatusColor()}`}>\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            {callConnecting && <Clock className=\"w-5 h-5 animate-spin\" />}\r\n            {callActive && !isListening && !isSpeaking && !isProcessing && (\r\n              <Signal className=\"w-5 h-5 animate-pulse\" />\r\n            )}\r\n            {isListening && <Mic className=\"w-5 h-5 animate-pulse text-green-600\" />}\r\n            {isSpeaking && <Volume2 className=\"w-5 h-5 animate-pulse text-blue-600\" />}\r\n            {isProcessing && <Clock className=\"w-5 h-5 animate-spin text-yellow-600\" />}\r\n            <span className=\"font-medium\">\r\n              {currentStep || getCallStatusText()}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div className=\"text-sm font-mono\">\r\n          {callActive && `${formatTime(callDuration)}`}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Call Control */}\r\n      <div className=\"flex justify-center mb-6\">\r\n        {!callActive && !callConnecting ? (\r\n          <button\r\n            onClick={startCall}\r\n            disabled={callConnecting || !backendConnected}\r\n            className={`flex items-center space-x-3 px-8 py-4 rounded-full font-medium text-lg shadow-lg transform hover:scale-105 transition-all ${\r\n              !backendConnected \r\n                ? 'bg-gray-400 text-white cursor-not-allowed' \r\n                : 'bg-green-600 text-white hover:bg-green-700'\r\n            }`}\r\n          >\r\n            <Phone className=\"w-6 h-6\" />\r\n            <span>{!backendConnected ? '‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à' : '‡§ï‡•â‡§≤ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç'}</span>\r\n          </button>\r\n        ) : (\r\n          <button\r\n            onClick={endCall}\r\n            className=\"flex items-center space-x-3 bg-red-600 text-white px-8 py-4 rounded-full hover:bg-red-700 transition-colors font-medium text-lg shadow-lg transform hover:scale-105\"\r\n          >\r\n            <PhoneOff className=\"w-6 h-6\" />\r\n            <span>‡§ï‡•â‡§≤ ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡•á‡§Ç</span>\r\n          </button>\r\n        )}\r\n      </div>\r\n\r\n      {/* Connection Error */}\r\n      {connectionError && (\r\n        <div className=\"mb-4 p-3 bg-red-100 border border-red-200 text-red-700 rounded-lg\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <AlertCircle className=\"w-5 h-5 flex-shrink-0\" />\r\n            <div className=\"flex-1\">\r\n              <span className=\"font-medium\">‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§è‡§∞‡§∞:</span>\r\n              <p className=\"text-sm mt-1\">{connectionError}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Call Log */}\r\n      <div \r\n        ref={conversationRef}\r\n        className=\"bg-gray-900 text-white rounded-lg p-4 h-96 overflow-y-auto border border-gray-700\"\r\n        style={{\r\n          background: 'linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)',\r\n          fontFamily: 'monospace'\r\n        }}\r\n      >\r\n        {conversation.length === 0 ? (\r\n          <div className=\"flex items-center justify-center h-full text-gray-400\">\r\n            <div className=\"text-center\">\r\n              <PhoneCall className=\"w-12 h-12 mx-auto mb-3 text-gray-500\" />\r\n              <p>‡§ï‡•â‡§≤ ‡§≤‡•â‡§ó ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡§æ‡§à ‡§ú‡§æ‡§è‡§ó‡§æ...</p>\r\n              {!backendConnected && (\r\n                <p className=\"text-sm mt-2 text-red-400\">‡§¨‡•à‡§ï‡§è‡§Ç‡§° ‡§∏‡§∞‡•ç‡§µ‡§∞ ‡§∏‡•á ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"space-y-3\">\r\n            {conversation.map((msg) => (\r\n              <div\r\n                key={msg.id}\r\n                className=\"flex items-start space-x-3\"\r\n              >\r\n                <div className=\"flex-shrink-0 text-xs text-gray-400 w-16\">\r\n                  {msg.timestamp.toLocaleTimeString('hi-IN', { \r\n                    hour12: false,\r\n                    hour: '2-digit',\r\n                    minute: '2-digit',\r\n                    second: '2-digit'\r\n                  })}\r\n                </div>\r\n                <div className={`flex-shrink-0 p-1 rounded-full ${\r\n                  msg.sender === 'user' ? 'bg-purple-600' : \r\n                  msg.sender === 'system' ? \r\n                    (msg.type === 'error' ? 'bg-red-600' : 'bg-gray-600') :\r\n                  msg.type === 'error' ? 'bg-red-600' :\r\n                  msg.type === 'status' ? 'bg-green-600' : 'bg-blue-600'\r\n                }`}>\r\n                  {getMessageIcon(msg)}\r\n                </div>\r\n                <div className=\"flex-1 min-w-0\">\r\n                  <div className={`text-sm ${\r\n                    msg.sender === 'user' \r\n                      ? 'text-purple-300' \r\n                      : msg.sender === 'system'\r\n                      ? (msg.type === 'error' ? 'text-red-300' : 'text-gray-300')\r\n                      : msg.type === 'error'\r\n                      ? 'text-red-300'\r\n                      : msg.type === 'status'\r\n                      ? 'text-green-300'\r\n                      : 'text-blue-300'\r\n                  }`}>\r\n                    <span className=\"font-medium\">\r\n                      {msg.sender === 'user' ? '‡§Ü‡§™' : \r\n                       msg.sender === 'system' ? '‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ' : '‡§¨‡•â‡§ü'}:\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"text-white text-sm mt-1 break-words\">\r\n                    {formatMessage(msg)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Current Activity Indicator */}\r\n      {callActive && (\r\n        <div className=\"mt-4 flex items-center justify-center space-x-4 text-sm\">\r\n          {isListening && (\r\n            <div className=\"flex items-center space-x-2 bg-green-100 px-4 py-2 rounded-full border border-green-200\">\r\n              <div className=\"w-2 h-2 bg-green-500 rounded-full animate-pulse\"></div>\r\n              <Mic className=\"w-4 h-4 text-green-600\" />\r\n              <span className=\"text-green-700 font-medium\">‡§∏‡•Å‡§® ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...</span>\r\n            </div>\r\n          )}\r\n          {isSpeaking && (\r\n            <div className=\"flex items-center space-x-2 bg-blue-100 px-4 py-2 rounded-full border border-blue-200\">\r\n              <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\"></div>\r\n              <Volume2 className=\"w-4 h-4 text-blue-600\" />\r\n              <span className=\"text-blue-700 font-medium\">‡§¨‡•â‡§ü ‡§¨‡•ã‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à...</span>\r\n            </div>\r\n          )}\r\n          {isProcessing && (\r\n            <div className=\"flex items-center space-x-2 bg-yellow-100 px-4 py-2 rounded-full border border-yellow-200\">\r\n              <div className=\"w-2 h-2 bg-yellow-500 rounded-full animate-pulse\"></div>\r\n              <Clock className=\"w-4 h-4 text-yellow-600\" />\r\n              <span className=\"text-yellow-700 font-medium\">‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏‡§ø‡§Ç‡§ó...</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Final Result */}\r\n      {complaintId && (\r\n        <div className=\"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h3 className=\"font-semibold text-green-800 flex items-center space-x-2\">\r\n                <CheckCircle className=\"w-5 h-5\" />\r\n                <span>‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§¶‡§∞‡•ç‡§ú!</span>\r\n              </h3>\r\n              <p className=\"text-green-700 mt-1\">\r\n                ‡§Ü‡§™‡§ï‡§æ ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§®‡§Ç‡§¨‡§∞: <span className=\"font-mono font-bold text-lg\">{complaintId}</span>\r\n              </p>\r\n              <p className=\"text-green-600 text-sm mt-1\">\r\n                ‡§ï‡•É‡§™‡§Ø‡§æ ‡§á‡§∏ ‡§®‡§Ç‡§¨‡§∞ ‡§ï‡•ã ‡§Ö‡§™‡§®‡•á ‡§™‡§æ‡§∏ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§∞‡§ñ‡•á‡§Ç\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Audio Controls */}\r\n      <div className=\"mt-4 flex justify-center\">\r\n        <button\r\n          onClick={() => setAudioEnabled(!audioEnabled)}\r\n          className={`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm ${\r\n            audioEnabled \r\n              ? 'bg-green-100 text-green-700 hover:bg-green-200' \r\n              : 'bg-red-100 text-red-700 hover:bg-red-200'\r\n          } transition-colors`}\r\n        >\r\n          {audioEnabled ? <Volume2 className=\"w-4 h-4\" /> : <VolumeX className=\"w-4 h-4\" />}\r\n          <span>{audioEnabled ? '‡§Ü‡§µ‡§æ‡§ú‡§º ‡§ö‡§æ‡§≤‡•Ç' : '‡§Ü‡§µ‡§æ‡§ú‡§º ‡§¨‡§Ç‡§¶'}</span>\r\n        </button>\r\n      </div>\r\n\r\n      {/* Debug Information */}\r\n      {typeof window !== 'undefined' && window.location.hostname === 'localhost' && (\r\n        <div className=\"mt-6 p-3 bg-gray-100 rounded-lg text-xs\">\r\n          <h4 className=\"font-semibold mb-2\">Debug Info:</h4>\r\n          <div className=\"space-y-1\">\r\n            <p>Backend Connected: {backendConnected ? '‚úÖ' : '‚ùå'}</p>\r\n            <p>Call Status: {callStatus}</p>\r\n            <p>Session ID: {sessionId || 'None'}</p>\r\n            <p>Reconnect Attempts: {reconnectAttempts.current}/{maxReconnectAttempts}</p>\r\n            <p>Is Listening: {isListening ? '‚úÖ' : '‚ùå'}</p>\r\n            <p>Is Speaking: {isSpeaking ? '‚úÖ' : '‚ùå'}</p>\r\n            <p>Is Processing: {isProcessing ? '‚úÖ' : '‚ùå'}</p>\r\n            <p>Messages Count: {conversation.length}</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":";;AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SACEA,KAAK,EACLC,QAAQ,EACRC,GAAG,EACHC,MAAM,EACNC,OAAO,EACPC,OAAO,EACPC,IAAI,EACJC,GAAG,EACHC,WAAW,EACXC,WAAW,EACXC,KAAK,EACLC,MAAM,EACNC,SAAS,EACTC,IAAI,EACJC,OAAO,QACF,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtB,eAAe,SAASC,cAAcA,CAAA,EAAG;EAAAC,EAAA;EACvC,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGC,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGF,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACG,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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}